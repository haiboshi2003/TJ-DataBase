"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[232],{5232:function(e,l,a){a.r(l),a.d(l,{default:function(){return C}});var t=a(3396),o=a(9242);const n=e=>((0,t.dD)("data-v-1d1cec2c"),e=e(),(0,t.Cn)(),e),i=n((()=>(0,t._)("div",null,"  装备管理 > 警车管理",-1))),s={style:{"text-align":"center"}},d={style:{display:"inline-block","text-align":"left"}},c=n((()=>(0,t._)("td",null,null,-1))),u={class:"seaButton"},r={style:{"text-align":"center"}},p={style:{display:"inline-block","text-align":"left"}},h={class:"seaButton"},m={style:{"text-align":"center"}},y={style:{display:"inline-block","text-align":"left"}},v={style:{"text-align":"center"}},w={style:{display:"inline-block","text-align":"left"}},V={class:"seaButton"},f={style:{"text-align":"center"}},I={style:{display:"inline-block","text-align":"left"}},_={class:"seaButton"};function g(e,l,a,n,g,b){const W=(0,t.up)("el-header"),U=(0,t.up)("el-text"),k=(0,t.up)("el-input"),x=(0,t.up)("el-option"),C=(0,t.up)("el-select"),D=(0,t.up)("el-button"),R=(0,t.up)("el-divider"),T=(0,t.up)("el-table-column"),z=(0,t.up)("el-table"),B=(0,t.up)("el-tab-pane"),$=(0,t.up)("el-tabs");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(W,{class:"sub-header",onMousemove:b.handleMouseMove},{default:(0,t.w5)((()=>[i])),_:1},8,["onMousemove"]),(0,t.Wm)($,{modelValue:g.anv,"onUpdate:modelValue":l[12]||(l[12]=e=>g.anv=e),type:"border-card",style:{"margin-top":"10vh"}},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{label:"查询车辆",name:"1"},{default:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t._)("table",d,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("车辆编号：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:g.vehicleId,"onUpdate:modelValue":l[0]||(l[0]=e=>g.vehicleId=e),placeholder:"请输入车辆编号",clearable:"",maxlength:"6",oninput:"value=value.replace(/[^\\d.]/g,'')","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("车辆类型：")])),_:1}),(0,t.Wm)(C,{class:"inputBox",modelValue:g.vehicletp,"onUpdate:modelValue":l[1]||(l[1]=e=>g.vehicletp=e),placeholder:"请选择"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{selected:"",label:"全部类型",value:""}),(0,t.Wm)(x,{label:"小轿车",value:"小轿车"}),(0,t.Wm)(x,{label:"两座摩托",value:"两座摩托"}),(0,t.Wm)(x,{label:"大型巴士",value:"大型巴士"}),(0,t.Wm)(x,{label:"大巴车",value:"大巴车"}),(0,t.Wm)(x,{label:"摩托车",value:"摩托车"})])),_:1},8,["modelValue"])])]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("使用状态：")])),_:1}),(0,t.Wm)(C,{class:"inputBox",modelValue:g.vehiclest,"onUpdate:modelValue":l[2]||(l[2]=e=>g.vehiclest=e),placeholder:"请选择"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{selected:"",label:"全部状态",value:""}),(0,t.Wm)(x,{label:"使用中",value:"1"}),(0,t.Wm)(x,{label:"空闲",value:"0"})])),_:1},8,["modelValue"])]),c])]),(0,t._)("div",u,[(0,t.Wm)(D,{type:"primary",onClick:b.fetchVehicleInfo},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1},8,["onClick"])])]),(0,t.Wm)(R),(0,t._)("div",null,[g.showVehicle?((0,t.wg)(),(0,t.j4)(z,{key:0,data:g.chanVehicleInfo,stripe:"",height:"450",onWheelPassive:l[3]||(l[3]=(0,o.iM)((()=>{}),["stop"]))},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{prop:"vehicle_ID",label:"警车编号",sortable:""}),(0,t.Wm)(T,{prop:"vehicle_Type",label:"车辆类型",sortable:""}),(0,t.Wm)(T,{prop:"status",label:"是否借出",sortable:""}),(0,t.Wm)(T,{align:"right",width:"100px"},{header:(0,t.w5)((()=>[])),default:(0,t.w5)((e=>[(0,t.Wm)(D,{size:"small",type:"primary",onClick:l=>b.vehicleuseInfo(e.$index,e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("使用记录")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,t.kq)("",!0),!g.showVehicle&&g.vehicleUseInfo.length>0?((0,t.wg)(),(0,t.j4)(z,{key:1,data:g.vehicleUseInfo,stripe:"",height:"450",onWheelPassive:l[4]||(l[4]=(0,o.iM)((()=>{}),["stop"]))},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{prop:"vehicleID",label:"警车编号",sortable:""}),(0,t.Wm)(T,{prop:"stationID",label:"使用的警局编号",sortable:""}),(0,t.Wm)(T,{prop:"borrowtime",label:"借出时间",sortable:""}),(0,t.Wm)(T,{prop:"returntime",label:"还回时间",sortable:""}),(0,t.Wm)(T,{align:"center",width:"80px"},{header:(0,t.w5)((()=>[(0,t.Wm)(D,{size:"small",type:"primary",onClick:b.back},{default:(0,t.w5)((()=>[(0,t.Uk)("返回")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["data"])):(0,t.kq)("",!0)])])),_:1}),(0,t.Wm)(B,{label:"新增车辆",name:"2"},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("table",p,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("车辆编号：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:g.addVehicleID,"onUpdate:modelValue":l[5]||(l[5]=e=>g.addVehicleID=e),placeholder:"请输入车辆编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"6","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("车辆类型：")])),_:1}),(0,t.Wm)(C,{class:"inputBox",modelValue:g.addVehicleType,"onUpdate:modelValue":l[6]||(l[6]=e=>g.addVehicleType=e),placeholder:"请选择"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{selected:"",label:"小轿车",value:"小轿车"}),(0,t.Wm)(x,{label:"两座摩托",value:"两座摩托"}),(0,t.Wm)(x,{label:"大型巴士",value:"大型巴士"}),(0,t.Wm)(x,{label:"大巴车",value:"大巴车"}),(0,t.Wm)(x,{label:"摩托车",value:"摩托车"})])),_:1},8,["modelValue"])])])]),(0,t._)("div",h,[(0,t.Wm)(D,{type:"primary",onClick:b.addVehicleInfo},{default:(0,t.w5)((()=>[(0,t.Uk)("上传")])),_:1},8,["onClick"])])])])),_:1}),(0,t.Wm)(B,{label:"删除车辆",name:"3"},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("table",y,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("车辆编号：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:g.delVehicleID,"onUpdate:modelValue":l[7]||(l[7]=e=>g.delVehicleID=e),placeholder:"请输入车辆编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"6","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(D,{type:"primary",onClick:b.delVehicleInfo,style:{"margin-left":"20px"}},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:1},8,["onClick"])])])])])])),_:1}),(0,t.Wm)(B,{label:"使用登记",name:"4"},{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t._)("table",w,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("车辆编号：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:g.addVehicleIDU,"onUpdate:modelValue":l[8]||(l[8]=e=>g.addVehicleIDU=e),placeholder:"请输入车辆编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"6","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警局编号：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:g.addStationIDU,"onUpdate:modelValue":l[9]||(l[9]=e=>g.addStationIDU=e),placeholder:"请输入警局编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"9","show-word-limit":""},null,8,["modelValue"])])])]),(0,t._)("div",V,[(0,t.Wm)(D,{type:"primary",onClick:b.addVehicleUseRecord},{default:(0,t.w5)((()=>[(0,t.Uk)("上传")])),_:1},8,["onClick"])])])])),_:1}),(0,t.Wm)(B,{label:"归还登记",name:"5"},{default:(0,t.w5)((()=>[(0,t._)("div",f,[(0,t._)("table",I,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("车辆编号：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:g.addVehicleIDR,"onUpdate:modelValue":l[10]||(l[10]=e=>g.addVehicleIDR=e),placeholder:"请输入车辆编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"6","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(U,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警局编号：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:g.addStationIDR,"onUpdate:modelValue":l[11]||(l[11]=e=>g.addStationIDR=e),placeholder:"请输入警局编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"9","show-word-limit":""},null,8,["modelValue"])])])]),(0,t._)("div",_,[(0,t.Wm)(D,{type:"primary",onClick:b.returnVehicle},{default:(0,t.w5)((()=>[(0,t.Uk)("归还")])),_:1},8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"])],64)}var b=a(7138),W=a(7178),U={data(){return{anv:"1",showVehicle:!0,vehicleId:"",vehicletp:"",vehiclest:"",vehicleInfo:[],chanVehicleInfo:[],vehicleUseInfo:[],addVehicleID:"",addVehicleType:"",delVehicleID:"",addVehicleIDU:"",addStationIDU:"",addVehicleIDR:"",addStationIDR:"",err:"警车不存在！"}},methods:{handleMouseMove(e){const l=e.pageX-e.target.offsetLeft,a=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",`${l}px`),e.target.style.setProperty("--y",`${a}px`)},async fetchVehicleInfo(){try{const e=await b.Z.get(`/api/vehicles?VID=${encodeURIComponent(this.vehicleId)}&VTYPE=${encodeURIComponent(this.vehicletp)}&VST=${encodeURIComponent(this.vehiclest)}`);this.vehicleInfo=e.data,this.chanVehicleInfo=this.vehicleInfo.map((e=>"0"===e.status?{...e,status:"空闲"}:"1"===e.status?{...e,status:"使用中"}:e))}catch(e){(0,W.z8)({showClose:!0,message:"获取警车列表失败！",type:"error",duration:5e3})}},async addVehicleInfo(){try{const e=await b.Z.post(`/api/addVehicle?vehicleID=${encodeURIComponent(this.addVehicleID)}&vehicleType=${encodeURIComponent(this.addVehicleType)}`);"string"==typeof e.data?(0,W.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(await this.fetchVehicleInfo(),(0,W.z8)({showClose:!0,message:"新增车辆成功! ",type:"success",duration:5e3}))}catch(e){(0,W.z8)({showClose:!0,message:"新增车辆失败！",type:"error",duration:5e3})}},async delVehicleInfo(){try{const e=await b.Z.delete(`/api/delVehicle?vehicleID=${encodeURIComponent(this.delVehicleID)}`);"string"==typeof e.data?(0,W.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(await this.fetchVehicleInfo(),(0,W.z8)({showClose:!0,message:"删除车辆成功! ",type:"success",duration:5e3}))}catch(e){(0,W.z8)({showClose:!0,message:"删除车辆失败！",type:"error",duration:5e3})}},async vehicleuseInfo(e,l){try{const e=await b.Z.get(`/api/vehiclesUseStatistics?VID=${encodeURIComponent(l.vehicle_ID)}`);this.vehicleUseInfo=e.data,this.vehicleUseInfo=this.vehicleUseInfo.map((e=>(null===e.returntime&&(e.returntime="————"),e))),0==e.data.length?(0,W.z8)({showClose:!0,message:"该车辆暂无使用记录",duration:5e3}):this.showVehicle=!1}catch(a){console.log(a),(0,W.z8)({showClose:!0,message:"获取车辆使用记录失败！",type:"error",duration:5e3})}},async back(){this.vehicleUseInfo="",this.showVehicle=!0},async addVehicleUseRecord(){try{const e=await b.Z.post(`/api/addVehicleUseRecord?vehicleID=${encodeURIComponent(this.addVehicleIDU)}&stationID=${encodeURIComponent(this.addStationIDU)}`);"string"==typeof e.data?(0,W.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(0,W.z8)({showClose:!0,message:"登记成功! ",type:"success",duration:5e3})}catch(e){(0,W.z8)({showClose:!0,message:"登记失败！",type:"error",duration:5e3})}},async returnVehicle(){try{const e=await b.Z.put(`/api/returnVehicle?vehicleID=${encodeURIComponent(this.addVehicleIDR)}&stationID=${encodeURIComponent(this.addStationIDR)}`);"string"==typeof e.data?(0,W.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(await this.fetchVehicleInfo(),(0,W.z8)({showClose:!0,message:"归还成功! ",type:"success",duration:5e3}))}catch(e){(0,W.z8)({showClose:!0,message:"归还失败！",type:"error",duration:5e3})}}}},k=a(89);const x=(0,k.Z)(U,[["render",g],["__scopeId","data-v-1d1cec2c"]]);var C=x}}]);
//# sourceMappingURL=232.a1f4012a.js.map