"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[480],{8480:function(e,t,i){i.r(t),i.d(t,{default:function(){return R}});var s=i(3396),a=i(9242),l=i(7139);const o=e=>((0,s.dD)("data-v-0292345e"),e=e(),(0,s.Cn)(),e),r=o((()=>(0,s._)("div",null,"  城区和居民管理 > 城市地区管理",-1))),n={class:"content"},c={class:"inputbox"},d={class:"container"},m={class:"citynametitle"},p={class:"charts"},u={class:"top-content"},h=o((()=>(0,s._)("h2",{style:{"text-align":"center"}},"案件类型统计饼图",-1))),y=["id"],v={class:"top-content"},g=o((()=>(0,s._)("h2",{style:{"text-align":"center"}},"案件时间统计折线图",-1))),_=["id"],f={class:"district-box"},C=o((()=>(0,s._)("div",{style:{color:"#51a1ec",display:"inline-block"}}," 人口:                ",-1))),w=o((()=>(0,s._)("div",{style:{color:"#51a1ec",display:"inline-block"}}," 犯罪数:             ",-1))),x=o((()=>(0,s._)("div",{style:{color:"#51a1ec",display:"inline-block"}}," 犯罪率:             ",-1))),b=o((()=>(0,s._)("span",null,"返回",-1)));function k(e,t,i,o,k,T){const N=(0,s.up)("el-header"),S=(0,s.up)("el-text"),M=(0,s.up)("el-input"),B=(0,s.up)("el-button"),R=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(N,{class:"sub-header",onMousemove:T.handleMouseMove},{default:(0,s.w5)((()=>[r])),_:1},8,["onMousemove"]),(0,s._)("div",{class:"main",onWheelPassive:t[2]||(t[2]=(0,a.iM)((()=>{}),["stop"]))},[(0,s._)("div",n,[(0,s._)("div",c,[(0,s.Wm)(S,{class:"noteText",type:"primary"},{default:(0,s.w5)((()=>[(0,s.Uk)("城市全称：")])),_:1}),(0,s.Wm)(M,{class:"inputBox",modelValue:k.CityName,"onUpdate:modelValue":t[0]||(t[0]=e=>k.CityName=e),placeholder:"请输入城市全称，如：上海市","show-word-limit":""},null,8,["modelValue"]),(0,s.Wm)(B,{type:"primary",onClick:T.fetchDistrictInfo},{default:(0,s.w5)((()=>[(0,s.Uk)("查询")])),_:1},8,["onClick"])]),(0,s._)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.distictResults,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.districtName},[(0,s._)("div",m,[(0,s._)("span",null,(0,l.zw)(e.districtName),1)]),(0,s._)("div",p,[(0,s._)("div",u,[h,(0,s._)("div",{id:"typePieChart_"+e.districtName,style:{width:"400px",height:"400px"}},null,8,y)]),(0,s._)("div",v,[g,(0,s._)("div",{id:"timeLineChart_"+e.districtName,style:{width:"400px",height:"400px"}},null,8,_)])]),(0,s._)("div",f,[(0,s._)("div",null,[C,(0,s.Uk)(" "+(0,l.zw)(e.population),1)]),(0,s._)("div",null,[w,(0,s.Uk)(" "+(0,l.zw)(e.crimeNum),1)]),(0,s._)("div",null,[x,(0,s.Uk)(" "+(0,l.zw)(T.crimeRate(e)),1)])])])))),128))]),(0,s.Wm)(R,{title:"提示",modelValue:k.errBox,"onUpdate:modelValue":t[1]||(t[1]=e=>k.errBox=e),onClose:T.handleClose},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(this.errMessage)+" ",1),(0,s.Wm)(B,{style:{"margin-top":"20px",right:"20px",display:"block"},onClick:T.handleClose},{default:(0,s.w5)((()=>[b])),_:1},8,["onClick"])])),_:1},8,["modelValue","onClose"])])],32)],64)}var T=i(7138),N=i(9043),S={data(){return{CityName:"",distictResults:[],crimeTypeStatistics:[],errBox:!1,errMessage:""}},methods:{handleMouseMove(e){const t=e.pageX-e.target.offsetLeft,i=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",`${t}px`),e.target.style.setProperty("--y",`${i}px`)},crimeRate(e){return(e.crimeNum/e.population*100).toFixed(2)+"%"},drawTypePieChart(){this.distictResults.forEach((e=>{const t="typePieChart_"+e.districtName,i=N.S1(document.getElementById(t)),s={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:e.crimeTypeStatistic[0],name:"强奸"},{value:e.crimeTypeStatistic[1],name:"抢劫"},{value:e.crimeTypeStatistic[2],name:"故意伤害"},{value:e.crimeTypeStatistic[3],name:"盗窃"},{value:e.crimeTypeStatistic[4],name:"诈骗"},{value:e.crimeTypeStatistic[5],name:"谋杀"}]}]};s&&i.setOption(s)}))},drawTimeLineChart(){this.distictResults.forEach((e=>{console.log(e.districtName);const t="timeLineChart_"+e.districtName;console.log(t);const i=N.S1(document.getElementById(t)),s=Object.keys(e.districtCrimeTimeStatistic),a=Object.values(e.districtCrimeTimeStatistic),l={xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{data:a,type:"line"}]};l&&i.setOption(l)}))},async fetchDistrictInfo(){try{if(""===this.CityName)return this.errMessage="请输入城市名称！",void(this.errBox=!0);const e=await T.Z.get(`/api/CityCrimeInfo?CityName=${encodeURIComponent(this.CityName)}`);console.log(e.data),this.distictResults=e.data,await new Promise((e=>setTimeout(e,300))),this.drawTypePieChart(),this.drawTimeLineChart(),0==e.data.length&&(this.errMessage="暂无该城市城区记录！",this.errBox=!0),console.log("调用结束")}catch(e){this.errMessage="未搜索到相关城市信息，请检查输入！",this.errBox=!0,console.log("fetchDistrictInfo出错！"+e)}},handleClose(){this.errBox=!1}}},M=i(89);const B=(0,M.Z)(S,[["render",k],["__scopeId","data-v-0292345e"]]);var R=B}}]);
//# sourceMappingURL=480.b25bfb68.js.map