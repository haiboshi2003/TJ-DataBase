"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[961],{961:function(e,t,l){l.r(t),l.d(t,{default:function(){return u}});var a=l(3396),s=l(9242),i=l(7139);const o=(0,a._)("div",null,"  警务处理系统 > 案件办理",-1),n={key:1,style:{"text-align":"center"}},c={key:2,style:{"text-align":"center"}};function p(e,t,l,p,r,d){const m=(0,a.up)("el-header"),h=(0,a.up)("el-table-column"),u=(0,a.up)("el-text"),y=(0,a.up)("el-input"),g=(0,a.up)("el-button"),b=(0,a.up)("el-table"),w=(0,a.up)("el-result");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(m,{class:"sub-header",onMousemove:d.handleMouseMove},{default:(0,a.w5)((()=>[o])),_:1},8,["onMousemove"]),"待调查案件"===r.process?((0,a.wg)(),(0,a.j4)(b,{key:0,data:r.cases,height:"90vh",onWheelPassive:t[1]||(t[1]=(0,s.iM)((()=>{}),["stop"])),stripe:"",style:{width:"100%","margin-top":"10vh"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"案件编号",prop:"案件编号",sortable:"",width:"105px"}),(0,a.Wm)(h,{label:"案件类型",prop:"案件类型",sortable:"",width:"105px"}),(0,a.Wm)(h,{label:"案件状态",prop:"案件状态",sortable:"",width:"105px"}),(0,a.Wm)(h,{label:"登记时间",prop:"登记时间",width:"155px",sortable:""}),(0,a.Wm)(h,{label:"案发地点",prop:"案发地点",sortable:""}),(0,a.Wm)(h,{label:"案件等级",prop:"案件等级",sortable:"",width:"105px"}),(0,a.Wm)(h,{align:"right",width:"260px"},{header:(0,a.w5)((()=>[(0,a._)("table",null,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(u,{type:"primary",style:{display:"inline-block"}},{default:(0,a.w5)((()=>[(0,a.Uk)("筛选案件编号：")])),_:1})]),(0,a._)("td",null,[(0,a.Wm)(y,{modelValue:r.caseID,"onUpdate:modelValue":t[0]||(t[0]=e=>r.caseID=e),size:"small",placeholder:"请输入案件编号",style:{display:"inline-block",width:"130px",height:"25px"}},null,8,["modelValue"])])])])])),default:(0,a.w5)((e=>[(0,a.Wm)(g,{size:"small",type:"primary",onClick:t=>d.setTeam(e.$index,e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("进行调查")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,a.kq)("",!0),"选择办案人员"===r.process?((0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(b,{data:r.policemen,height:"90vh",onSelectionChange:d.selectPolicemen,onWheelPassive:t[3]||(t[3]=(0,s.iM)((()=>{}),["stop"])),stripe:"",style:{width:"100%","margin-top":"10vh"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"selection"}),(0,a.Wm)(h,{label:"警员编号",prop:"警员编号",sortable:""}),(0,a.Wm)(h,{label:"姓名",prop:"姓名",sortable:""}),(0,a.Wm)(h,{label:"性别",prop:"性别",sortable:""}),(0,a.Wm)(h,{label:"民族",prop:"民族",sortable:""}),(0,a.Wm)(h,{label:"状态",prop:"状态",sortable:""}),(0,a.Wm)(h,{label:"职位",prop:"职位",sortable:""}),(0,a.Wm)(h,{align:"left",width:"260px"},{header:(0,a.w5)((()=>[(0,a._)("table",null,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(u,{type:"primary",style:{display:"inline-block",width:"140px"}},{default:(0,a.w5)((()=>[(0,a.Uk)("当前选择"+(0,i.zw)(r.selectCaseID),1)])),_:1})]),(0,a._)("td",null,[(0,a.Wm)(g,{size:"small",type:"primary",onClick:d.goBack},{default:(0,a.w5)((()=>[(0,a.Uk)("重选案件")])),_:1},8,["onClick"])])]),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(u,{type:"primary",style:{display:"inline-block"}},{default:(0,a.w5)((()=>[(0,a.Uk)("筛选警员编号：")])),_:1})]),(0,a._)("td",null,[(0,a.Wm)(y,{modelValue:r.policemenID,"onUpdate:modelValue":t[2]||(t[2]=e=>r.policemenID=e),size:"small",placeholder:"请输入警员编号",style:{display:"inline-block",width:"100px",height:"25px"}},null,8,["modelValue"])])])])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,a.Wm)(g,{type:"primary",onClick:d.finish,disabled:r.isSet,style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a.Uk)("调查此案件")])),_:1},8,["onClick","disabled"])])):(0,a.kq)("",!0),"完成"===r.process?((0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(w,{icon:"success",title:"案件已设为调查","sub-title":"点击按钮返回立案列表"},{extra:(0,a.w5)((()=>[(0,a.Wm)(g,{type:"primary",onClick:d.backToH},{default:(0,a.w5)((()=>[(0,a.Uk)("返回")])),_:1},8,["onClick"])])),_:1})])):(0,a.kq)("",!0)],64)}var r=l(7138),d={data(){return{caseID:"",process:"待调查案件",cases:"",policemen:"",policemenID:"",selectCaseID:"",team:"",isSet:!0}},methods:{handleMouseMove(e){const t=e.pageX-e.target.offsetLeft,l=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",`${t}px`),e.target.style.setProperty("--y",`${l}px`)},async setTeam(e,t){this.process="选择办案人员",await this.getPolicemen(),this.selectCaseID=t["案件编号"]},async getCases(){try{const e=await r.Z.get(`/api/caseInvestigation/queryCase?caseID=${encodeURIComponent(this.caseID)}`);this.cases=e.data,console.log(e.data)}catch(e){alert(e),console.log("getCases函数出错："+e)}},async getPolicemen(){try{const e=await r.Z.get(`/api/caseInvestigation/queryPolicemen?policemenID=${encodeURIComponent(this.policemenID)}`);this.policemen=e.data,console.log(e.data)}catch(e){alert(e),console.log("getPolicemen函数出错："+e)}},goBack(){this.process="待调查案件",this.selectCaseID=""},selectPolicemen(e){this.team=e,this.team.length>0?this.isSet=!1:this.isSet=!0},async finish(){try{await r.Z.put(`/api/caseInvestigation/modifyCaseStatus?caseID=${encodeURIComponent(this.selectCaseID)}`)}catch(e){alert(e),console.log("finish函数出错："+e)}this.process="完成",this.selectCaseID="",this.selectPolicemen="",await this.getCases()},backToH(){this.process="待调查案件"}},async created(){await this.getCases()},watch:{async caseID(){await this.getCases()},async policemenID(){await this.getPolicemen()}}},m=l(89);const h=(0,m.Z)(d,[["render",p]]);var u=h}}]);
//# sourceMappingURL=961.0a12c0af.js.map