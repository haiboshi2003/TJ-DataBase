"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[529],{2529:function(e,o,t){t.r(o),t.d(o,{default:function(){return I}});var i=t(3396),n=t(9242),a=t(7139);const s=e=>((0,i.dD)("data-v-2659c62e"),e=e(),(0,i.Cn)(),e),c={key:0},l=(0,i.uE)('<option value="学员" data-v-2659c62e>学员</option><option value="警员" data-v-2659c62e>警员</option><option value="警督" data-v-2659c62e>警督</option><option value="警司" data-v-2659c62e>警司</option><option value="警监" data-v-2659c62e>警监</option><option value="总警监" data-v-2659c62e>总警监</option>',6),p=[l],u={key:0,class:"success-message"},d={key:1,class:"error-message"},r={key:1},h=s((()=>(0,i._)("p",null,"未找到警员信息",-1))),v=[h];function m(e,o,t,s,l,h){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>l.policeNumber=e),placeholder:"输入警号"},null,512),[[n.nr,l.policeNumber]]),(0,i._)("button",{onClick:o[1]||(o[1]=(...e)=>h.searchPolice&&h.searchPolice(...e))},"搜索"),l.policeInfo?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("p",null,"警员姓名："+(0,a.zw)(l.policeInfo.police_name),1),(0,i._)("p",null,"当前职位："+(0,a.zw)(l.policeInfo.position),1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>l.selectedPosition=e)},p,512),[[n.bM,l.selectedPosition]]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>l.reason=e),placeholder:"输入修改原因"},null,512),[[n.nr,l.reason]]),(0,i._)("button",{onClick:o[4]||(o[4]=(...e)=>h.updatePosition&&h.updatePosition(...e))},"确认修改"),l.updateSuccess?((0,i.wg)(),(0,i.iD)("div",u,"修改成功")):l.updateFailed?((0,i.wg)(),(0,i.iD)("div",d,"申请失败")):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",r,v))])}var b=t(7138),_={data(){return{policeNumber:"",policeInfo:null,selectedPosition:"",reason:"",updateSuccess:!1,updateFailed:!1}},methods:{searchPolice(){this.policeInfo=b.Z.post("/api/search",{temp:this.policeNumber}).then((e=>{this.policeInfo=e.data})).catch((e=>{console.error(e),this.policeInfo=null}))},async updatePosition(){const e=await this.updatePositionInDatabase(this.policeInfo,this.selectedPosition,this.reason);e?(this.updateSuccess=!0,this.updateFailed=!1,this.searchPolice()):(this.updateSuccess=!1,this.updateFailed=!0)},updatePositionInDatabase(e,o,t){return new Promise(((t,i)=>{b.Z.post("/api/position",{police_number:e.police_number,police_name:e.police_name,position:o,ID_number:e.ID_number,phone_number:e.phone_number,gender:e.gender}).then((e=>{this.policeInfo=e.data,t(!0)})).catch((e=>{console.error(e),t(!1)}))}))}}},f=t(89);const w=(0,f.Z)(_,[["render",m],["__scopeId","data-v-2659c62e"]]);var I=w}}]);
//# sourceMappingURL=529.1bab2f94.js.map