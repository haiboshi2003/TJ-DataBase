"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[110],{6110:function(e,l,t){t.r(l),t.d(l,{default:function(){return S}});var a=t(3396),o=t(9242),n=t(7139);const s=e=>((0,a.dD)("data-v-15657c32"),e=e(),(0,a.Cn)(),e),i=s((()=>(0,a._)("div",null,"  城区和居民管理 > 城市调度管理",-1))),p={class:"main"},m={style:{"text-align":"center"}},c={style:{display:"inline-block","text-align":"left"}},r={class:"seaButton"},d={key:1},u={style:{"text-align":"center"}},h={style:{display:"inline-block","text-align":"left"}},y=s((()=>(0,a._)("td",null,null,-1))),b={class:"seaButton"},w={key:1},_={key:2,style:{"text-align":"center"}},f={style:{"text-align":"center"}},k={style:{display:"inline-block","text-align":"center"}},g=s((()=>(0,a._)("tr",null,[(0,a._)("td",null,[(0,a._)("span",{class:"ssqtitletest"},"当前调度信息")])],-1))),W={class:"ssqtitletest"},x={class:"ssqtitletest"},I={class:"seaButton"},v={class:"seaButton"},C={key:3,style:{"text-align":"center"}},U={key:4,style:{"text-align":"center"}};function D(e,l,t,s,D,V){const N=(0,a.up)("el-header"),B=(0,a.up)("el-text"),P=(0,a.up)("el-input"),S=(0,a.up)("el-option"),$=(0,a.up)("el-select"),R=(0,a.up)("el-button"),M=(0,a.up)("el-divider"),T=(0,a.up)("el-table-column"),q=(0,a.up)("el-table"),z=(0,a.up)("el-tab-pane"),j=(0,a.up)("el-result"),A=(0,a.up)("el-tabs");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(N,{class:"sub-header",onMousemove:V.handleMouseMove},{default:(0,a.w5)((()=>[i])),_:1},8,["onMousemove"]),(0,a._)("main",p,[(0,a._)("section",null,[(0,a.Wm)(A,{modelValue:D.anv,"onUpdate:modelValue":l[10]||(l[10]=e=>D.anv=e),type:"border-card",style:{"margin-top":"10vh"}},{default:(0,a.w5)((()=>["选择调度警员"===D.process?((0,a.wg)(),(0,a.j4)(z,{key:0,label:"查询警员信息",name:"1"},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("table",c,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(B,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("输入警员ID:")])),_:1}),(0,a.Wm)(P,{class:"inputBox",modelValue:D.policemenNumber,"onUpdate:modelValue":l[0]||(l[0]=e=>D.policemenNumber=e),placeholder:"请输入警员编号",clearable:"",maxlength:"7",oninput:"value=value.replace(/[^\\d.]/g,'')",style:{width:"231px"},"show-word-limit":""},null,8,["modelValue"])]),(0,a._)("td",null,[(0,a.Wm)(B,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("输入警员姓名:")])),_:1}),(0,a.Wm)(P,{class:"inputBox",modelValue:D.policemenName,"onUpdate:modelValue":l[1]||(l[1]=e=>D.policemenName=e),style:{width:"250px"},placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])])]),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(B,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("选择工作状态:")])),_:1}),(0,a.Wm)($,{class:"inputBox",modelValue:D.policemenStatus,"onUpdate:modelValue":l[2]||(l[2]=e=>D.policemenStatus=e),style:{width:"231px"},placeholder:"请选择"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{label:"全部状态",selected:"",value:""}),(0,a.Wm)(S,{label:"在职",value:"在职"}),(0,a.Wm)(S,{label:"离职",value:"离职"})])),_:1},8,["modelValue"])]),(0,a._)("td",null,[(0,a.Wm)(B,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("选择职务:")])),_:1}),(0,a.Wm)($,{class:"inputBox",modelValue:D.policemenPosition,"onUpdate:modelValue":l[3]||(l[3]=e=>D.policemenPosition=e),style:{width:"200px"},placeholder:"请选择"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{label:"全部职务",selected:"",value:""}),(0,a.Wm)(S,{label:"学员",value:"学员"}),(0,a.Wm)(S,{label:"警员",value:"警员"}),(0,a.Wm)(S,{label:"警司",value:"警司"}),(0,a.Wm)(S,{label:"警督",value:"警督"}),(0,a.Wm)(S,{label:"警监",value:"警监"}),(0,a.Wm)(S,{label:"总警监",value:"总警监"})])),_:1},8,["modelValue"])])])]),(0,a._)("div",r,[(0,a.Wm)(R,{type:"primary",onClick:V.fetchpolicemenInfo},{default:(0,a.w5)((()=>[(0,a.Uk)("查询")])),_:1},8,["onClick"])])]),(0,a.Wm)(M),D.policemenInfos.length>0?((0,a.wg)(),(0,a.j4)(q,{key:0,data:D.policemenInfos,stripe:"",height:"450",onWheelPassive:l[4]||(l[4]=(0,o.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{prop:"pid",label:"警员编号",sortable:"",width:"105px"}),(0,a.Wm)(T,{prop:"name",label:"姓名",sortable:"",width:"80px"}),(0,a.Wm)(T,{prop:"idn",label:"身份证号",sortable:"",width:"175px"}),(0,a.Wm)(T,{prop:"birthday",label:"出生日期",sortable:"",width:"105px"}),(0,a.Wm)(T,{prop:"gender",label:"性别",sortable:"",width:"80px"}),(0,a.Wm)(T,{prop:"nation",label:"民族",sortable:"",width:"80px"}),(0,a.Wm)(T,{prop:"phone",label:"电话",sortable:"",width:"115px"}),(0,a.Wm)(T,{prop:"email",label:"邮箱",sortable:""}),(0,a.Wm)(T,{prop:"status",label:"状态",sortable:"",width:"80px"}),(0,a.Wm)(T,{prop:"position",label:"职务",sortable:"",width:"80px"}),(0,a.Wm)(T,{align:"right",width:"120px"},{default:(0,a.w5)((e=>[(0,a.Wm)(R,{size:"small",type:"primary",onClick:l=>V.changeEmploy(e.$index,e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("进行人事调动")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):((0,a.wg)(),(0,a.iD)("div",d,(0,n.zw)(D.boxContent),1))])),_:1})):(0,a.kq)("",!0),"选择调动警局"===D.process?((0,a.wg)(),(0,a.j4)(z,{key:1,label:"查询警局",name:"1"},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("table",h,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(B,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("警局ID:")])),_:1}),(0,a.Wm)(P,{class:"inputBox",modelValue:D.stationID,"onUpdate:modelValue":l[5]||(l[5]=e=>D.stationID=e),placeholder:"请输入警局编号",clearable:"",maxlength:"9",oninput:"value=value.replace(/[^\\d.]/g,'')","show-word-limit":""},null,8,["modelValue"])]),(0,a._)("td",null,[(0,a.Wm)(B,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("警局名称:")])),_:1}),(0,a.Wm)(P,{class:"inputBox",modelValue:D.stationName,"onUpdate:modelValue":l[6]||(l[6]=e=>D.stationName=e),placeholder:"请输入警局名称",clearable:""},null,8,["modelValue"])])]),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(B,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("所在地址:")])),_:1}),(0,a.Wm)(P,{class:"inputBox",modelValue:D.stationAddress,"onUpdate:modelValue":l[7]||(l[7]=e=>D.stationAddress=e),placeholder:"请输入地址",clearable:""},null,8,["modelValue"])]),y])]),(0,a._)("div",b,[(0,a.Wm)(R,{type:"primary",onClick:V.fetchStationInfo},{default:(0,a.w5)((()=>[(0,a.Uk)("查询")])),_:1},8,["onClick"])])]),(0,a.Wm)(M),D.stationInfos.length>0?((0,a.wg)(),(0,a.j4)(q,{key:0,data:D.stationInfos,stripe:"",height:"450",onWheelPassive:l[8]||(l[8]=(0,o.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{prop:"stationID",label:"警局编号",sortable:""}),(0,a.Wm)(T,{prop:"stationName",label:"警局名称",sortable:""}),(0,a.Wm)(T,{prop:"address",label:"所在地址",sortable:""}),(0,a.Wm)(T,{prop:"budget",label:"预算",sortable:""}),(0,a.Wm)(T,{align:"right",width:"260px"},{header:(0,a.w5)((()=>[(0,a._)("table",null,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(B,{type:"primary",style:{display:"inline-block",width:"170px"}},{default:(0,a.w5)((()=>[(0,a.Uk)("当前警员警号："+(0,n.zw)(D.selectPolicemenID),1)])),_:1})]),(0,a._)("td",null,[(0,a.Wm)(R,{size:"small",type:"primary",onClick:V.goBack},{default:(0,a.w5)((()=>[(0,a.Uk)("重选警员")])),_:1},8,["onClick"])])])])])),default:(0,a.w5)((e=>[(0,a.Wm)(R,{size:"small",type:"primary",onClick:l=>V.finish(e.$index,e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("调入此局")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):((0,a.wg)(),(0,a.iD)("div",w,(0,n.zw)(D.boxContent),1))])),_:1})):(0,a.kq)("",!0),"确认信息"===D.process?((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("div",f,[(0,a._)("table",k,[g,(0,a._)("tr",null,[(0,a._)("td",null,[(0,a._)("span",W,"调度警员警号："+(0,n.zw)(D.selectPolicemenID),1)])]),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a._)("span",x,"调入警局警号："+(0,n.zw)(D.selectStationID),1)])]),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(B,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("输入雇佣薪资:")])),_:1}),(0,a.Wm)(P,{class:"inputBox",modelValue:D.salary,"onUpdate:modelValue":l[9]||(l[9]=e=>D.salary=e),placeholder:"警员薪水",clearable:""},null,8,["modelValue"])])]),(0,a._)("div",I,[(0,a.Wm)(R,{type:"primary",onClick:V.employ},{default:(0,a.w5)((()=>[(0,a.Uk)("确认薪水")])),_:1},8,["onClick"])]),(0,a._)("div",v,[(0,a.Wm)(R,{type:"primary",onClick:V.goBack},{default:(0,a.w5)((()=>[(0,a.Uk)("返回")])),_:1},8,["onClick"])])])])])):(0,a.kq)("",!0),"完成"===D.process?((0,a.wg)(),(0,a.iD)("div",C,[(0,a.Wm)(j,{icon:"success",title:"人事调动完成，任职开始时间为"+this.employInfo.employTime,"sub-title":"点击按钮返回警员查询列表"},{extra:(0,a.w5)((()=>[(0,a.Wm)(R,{type:"primary",onClick:V.goBack},{default:(0,a.w5)((()=>[(0,a.Uk)("返回")])),_:1},8,["onClick"])])),_:1},8,["title"])])):(0,a.kq)("",!0),"失败"===D.process?((0,a.wg)(),(0,a.iD)("div",U,[(0,a.Wm)(j,{icon:"fail",title:"人事调动失败，薪资超过当局预算"+this.employInfo.failReason+"元","sub-title":"点击按钮返回警员查询列表"},{extra:(0,a.w5)((()=>[(0,a.Wm)(R,{type:"primary",onClick:V.goBack},{default:(0,a.w5)((()=>[(0,a.Uk)("返回")])),_:1},8,["onClick"])])),_:1},8,["title"])])):(0,a.kq)("",!0)])),_:1},8,["modelValue"])])])],64)}var V=t(7138),N={data(){return{anv:"1",policemenNumber:"",policemenName:"",policemenIDNum:"",policemenYear:"",policemenSex:"",policemenNation:"",policemenStatus:"",policemenPosition:"",policemenInfos:[],selectPolicemenID:"",stationAddress:"",stationName:"",stationID:"",stationInfos:[],selectStationID:"",salary:0,err:"警员不存在！",boxContent:"",process:"选择调度警员",failreason:"",employInfo:[]}},methods:{handleMouseMove(e){const l=e.pageX-e.target.offsetLeft,t=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",`${l}px`),e.target.style.setProperty("--y",`${t}px`)},async fetchpolicemenInfo(){try{const e=await V.Z.get(`/api/policemenInfo?policemenID=${encodeURIComponent(this.policemenNumber)}&policemenName=${encodeURIComponent(this.policemenName)}&policemenIDNum=${encodeURIComponent(this.policemenIDNum)}&policemenYear=${encodeURIComponent(this.policemenYear)}&policemenSex=${encodeURIComponent(this.policemenSex)}&policemenNation=${encodeURIComponent(this.policemenNation)}&policemenStatus=${encodeURIComponent(this.policemenStatus)}&policemenPosition=${encodeURIComponent(this.policemenPosition)}`);this.policemenInfos=e.data.map((e=>"M"===e.gender?{...e,gender:"男"}:"F"===e.gender?{...e,gender:"女"}:e))}catch(e){ElMessage({showClose:!0,message:"获取警员列表失败！",type:"error",duration:5e3})}},async fetchStationInfo(){try{const e=await V.Z.get(`/api/stationInfo?stationID=${encodeURIComponent(this.stationID)}&stationName=${encodeURIComponent(this.stationName)}&stationAddress=${encodeURIComponent(this.stationAddress)}`);this.stationInfos=e.data}catch(e){ElMessage({showClose:!0,message:"获取警局列表失败！",type:"error",duration:5e3})}},async changeEmploy(e,l){this.process="选择调动警局",this.selectPolicemenID=l["pid"],console.log(this.selectPolicemenID),this.err="警局不存在！"},async goBack(){this.process="选择调度警员",this.selectPolicemenID="",this.err="警员不存在！"},async finish(e,l){this.process="确认信息",this.selectStationID=l["stationID"],console.log(this.selectStationID),this.err="确认信息界面出错"},async employ(){console.log(this.salary),this.salary<=0?alert("雇佣薪资需大于〇！"):V.Z.post("/api/addEmploy",{selectPolicemenID:this.selectPolicemenID,selectStationID:this.selectStationID,salary:this.salary}).then((e=>{this.employInfo=e.data,console.log(e.data),"success"===e.data.failReason?this.process="完成":this.process="失败"})).catch((e=>{this.boxContent=this.err,console.log(e)}))}}},B=t(89);const P=(0,B.Z)(N,[["render",D],["__scopeId","data-v-15657c32"]]);var S=P}}]);
//# sourceMappingURL=110.14bc6f36.js.map