{"version":3,"file":"js/529.1bab2f94.js","mappings":"gjBAQQA,G,SASwBC,MAAM,mB,SACFA,MAAM,iB,oBAGpCC,EAAAA,EAAAA,GAAc,SAAX,WAAO,K,GAAVC,G,0CApBJC,EAAAA,EAAAA,IAsBM,sBArBJF,EAAAA,EAAAA,GAAmD,S,qCAAnCG,EAAAC,aAAYC,GAAEC,YAAY,Q,iBAA1BH,EAAAC,iBAChBJ,EAAAA,EAAAA,GAAyC,UAAhCO,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAC,cAAAD,EAAAC,gBAAAF,KAAc,MACnBN,EAAAS,aAAU,WAArBV,EAAAA,EAAAA,IAeM,MAAAW,EAAA,EAdJb,EAAAA,EAAAA,GAAwC,SAArC,SAAKc,EAAAA,EAAAA,IAAGX,EAAAS,WAAWG,aAAW,IACjCf,EAAAA,EAAAA,GAAqC,SAAlC,SAAKc,EAAAA,EAAAA,IAAGX,EAAAS,WAAWI,UAAQ,aAC9BhB,EAAAA,EAAAA,GAOS,U,qCAPQG,EAAAc,iBAAgBZ,I,cAAhBF,EAAAc,qBAAgB,SAQjCjB,EAAAA,EAAAA,GAA+C,S,qCAA/BG,EAAAe,OAAMb,GAAEC,YAAY,U,iBAApBH,EAAAe,WAChBlB,EAAAA,EAAAA,GAA6C,UAApCO,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAS,gBAAAT,EAAAS,kBAAAV,KAAgB,QACrBN,EAAAiB,gBAAa,WAAxBlB,EAAAA,EAAAA,IAA4D,MAA5DmB,EAAkD,SAClClB,EAAAmB,eAAY,WAA5BpB,EAAAA,EAAAA,IAA8D,MAA9DqB,EAAoD,UAAI,+BAE1DrB,EAAAA,EAAAA,IAEM,MAAAsB,EAAAC,K,eAMV,GACEC,IAAAA,GACE,MAAO,CACLtB,aAAc,GACdQ,WAAY,KACZK,iBAAkB,GAClBC,OAAQ,GACRE,eAAe,EACfE,cAAc,EAElB,EACAK,QAAS,CACPhB,YAAAA,GACEiB,KAAKhB,WAAaiB,EAAAA,EACfC,KAAK,cAAe,CAAEC,KAAMH,KAAKxB,eACjC4B,MAAMC,IACLL,KAAKhB,WAAaqB,EAASP,IAAI,IAIhCQ,OAAOC,IACNC,QAAQD,MAAMA,GACdP,KAAKhB,WAAa,IAAI,GAE5B,EACA,oBAAMO,GAEJ,MAAMkB,QAAkBT,KAAKU,yBAC3BV,KAAKhB,WACLgB,KAAKX,iBACLW,KAAKV,QAEHmB,GACFT,KAAKR,eAAgB,EACrBQ,KAAKN,cAAe,EACpBM,KAAKjB,iBAELiB,KAAKR,eAAgB,EACrBQ,KAAKN,cAAe,EAExB,EACAgB,wBAAAA,CAAyB1B,EAAY2B,EAAarB,GAChD,OAAO,IAAIsB,SAAQ,CAACC,EAASC,KAC3Bb,EAAAA,EACGC,KAAK,gBAAiB,CACrBa,cAAe/B,EAAW+B,cAC1B5B,YAAaH,EAAWG,YACxBC,SAAUuB,EACVK,UAAWhC,EAAWgC,UACtBC,aAAcjC,EAAWiC,aACzBC,OAAQlC,EAAWkC,SAEpBd,MAAMC,IACLL,KAAKhB,WAAaqB,EAASP,KAC3Be,GAAQ,EAAK,IAEdP,OAAOC,IACNC,QAAQD,MAAMA,GACdM,GAAQ,EAAM,GACd,GAER,I,QClFJ,MAAMM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://dbproject/./src/components/PoliceManagement/PositionManage.vue","webpack://dbproject/./src/components/PoliceManagement/PositionManage.vue?0405"],"sourcesContent":["<template>\r\n  <div>\r\n    <input v-model=\"policeNumber\" placeholder=\"输入警号\" />\r\n    <button @click=\"searchPolice\">搜索</button>\r\n    <div v-if=\"policeInfo\">\r\n      <p>警员姓名：{{ policeInfo.police_name }}</p>\r\n      <p>当前职位：{{ policeInfo.position }}</p>\r\n      <select v-model=\"selectedPosition\">\r\n        <option value=\"学员\">学员</option>\r\n        <option value=\"警员\">警员</option>\r\n        <option value=\"警督\">警督</option>\r\n        <option value=\"警司\">警司</option>\r\n        <option value=\"警监\">警监</option>\r\n        <option value=\"总警监\">总警监</option>\r\n      </select>\r\n      <input v-model=\"reason\" placeholder=\"输入修改原因\" />\r\n      <button @click=\"updatePosition\">确认修改</button>\r\n      <div v-if=\"updateSuccess\" class=\"success-message\">修改成功</div>\r\n      <div v-else-if=\"updateFailed\" class=\"error-message\">申请失败</div>\r\n    </div>\r\n    <div v-else>\r\n      <p>未找到警员信息</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"../../api/request\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      policeNumber: \"\",\r\n      policeInfo: null,\r\n      selectedPosition: \"\",\r\n      reason: \"\",\r\n      updateSuccess: false,\r\n      updateFailed: false,\r\n    };\r\n  },\r\n  methods: {\r\n    searchPolice() {\r\n      this.policeInfo = axios\r\n        .post(\"/api/search\", { temp: this.policeNumber })\r\n        .then((response) => {\r\n          this.policeInfo = response.data;\r\n          //   this.updateSuccess = false\r\n          //   this.updateFailed = false\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n          this.policeInfo = null;\r\n        });\r\n    },\r\n    async updatePosition() {\r\n      // 模拟更新职位\r\n      const isSuccess = await this.updatePositionInDatabase(\r\n        this.policeInfo,\r\n        this.selectedPosition,\r\n        this.reason\r\n      );\r\n      if (isSuccess) {\r\n        this.updateSuccess = true;\r\n        this.updateFailed = false;\r\n        this.searchPolice();\r\n      } else {\r\n        this.updateSuccess = false;\r\n        this.updateFailed = true;\r\n      }\r\n    },\r\n    updatePositionInDatabase(policeInfo, newPosition, reason) {\r\n      return new Promise((resolve, reject) => {\r\n        axios\r\n          .post(\"/api/position\", {\r\n            police_number: policeInfo.police_number,\r\n            police_name: policeInfo.police_name,\r\n            position: newPosition,\r\n            ID_number: policeInfo.ID_number,\r\n            phone_number: policeInfo.phone_number,\r\n            gender: policeInfo.gender,\r\n          })\r\n          .then((response) => {\r\n            this.policeInfo = response.data;\r\n            resolve(true);\r\n          })\r\n          .catch((error) => {\r\n            console.error(error);\r\n            resolve(false);\r\n          });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.success-message {\r\n  color: green;\r\n  margin-top: 10px;\r\n}\r\n\r\n.error-message {\r\n  color: red;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./PositionManage.vue?vue&type=template&id=2659c62e&scoped=true\"\nimport script from \"./PositionManage.vue?vue&type=script&lang=js\"\nexport * from \"./PositionManage.vue?vue&type=script&lang=js\"\n\nimport \"./PositionManage.vue?vue&type=style&index=0&id=2659c62e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2659c62e\"]])\n\nexport default __exports__"],"names":["_hoisted_2","class","_createElementVNode","_hoisted_12","_createElementBlock","$data","policeNumber","$event","placeholder","onClick","_cache","args","$options","searchPolice","policeInfo","_hoisted_1","_toDisplayString","police_name","position","selectedPosition","reason","updatePosition","updateSuccess","_hoisted_9","updateFailed","_hoisted_10","_hoisted_11","_hoisted_13","data","methods","this","axios","post","temp","then","response","catch","error","console","isSuccess","updatePositionInDatabase","newPosition","Promise","resolve","reject","police_number","ID_number","phone_number","gender","__exports__","render"],"sourceRoot":""}