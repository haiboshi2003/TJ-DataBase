"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[734],{734:function(n,e,i){i.r(e),i.d(e,{default:function(){return K}});var s=i(3396),t=i(9242),o=i(7139);const l=n=>((0,s.dD)("data-v-20ae6912"),n=n(),(0,s.Cn)(),n),a=l((()=>(0,s._)("div",null,"  警员管理 > 注册",-1))),r=l((()=>(0,s._)("div",{class:"ssqtitletest"},[(0,s._)("span",null,"添 加 新 用 户")],-1))),_={class:"content"},u={class:"inputContainer"},c=l((()=>(0,s._)("div",{class:"inputTitle"},"警号",-1))),p=l((()=>(0,s._)("span",{class:"ssqpoptip"},"请输入7位警号",-1))),d={class:"inputContainer"},m=l((()=>(0,s._)("div",{class:"inputTitle"},"姓名",-1))),g={class:"inputContainer"},h=l((()=>(0,s._)("div",{class:"inputTitle"},"身份证号",-1))),b=l((()=>(0,s._)("span",{class:"ssqpoptip"},"请输入正确的身份证号",-1))),I={class:"inputContainer"},f=l((()=>(0,s._)("div",{class:"inputTitle"},"出生日期",-1))),v={class:"inputContainer"},y=l((()=>(0,s._)("div",{class:"inputTitle"},"性别",-1))),w={class:"inputContainer"},D=l((()=>(0,s._)("div",{class:"inputTitle"},"民族",-1))),C=l((()=>(0,s._)("span",{class:"ssqpoptip"},"请以“族”结尾!",-1))),U={class:"inputContainer"},T=l((()=>(0,s._)("div",{class:"inputTitle"},"联系方式",-1))),V={class:"inputContainer"},k=l((()=>(0,s._)("div",{class:"inputTitle"},"邮箱",-1))),M=l((()=>(0,s._)("span",{class:"ssqpoptip"},"请输入正确的邮箱地址",-1))),q={class:"inputContainer"},j=l((()=>(0,s._)("div",{class:"inputTitle"},"状态",-1))),W=l((()=>(0,s._)("option",null,"在职",-1))),F=l((()=>(0,s._)("option",null,"停职",-1))),z=l((()=>(0,s._)("option",null,"离职",-1))),L=[W,F,z],N={class:"inputContainer"},x=l((()=>(0,s._)("div",{class:"inputTitle"},"职务",-1))),P=l((()=>(0,s._)("option",null,"学员",-1))),Z=l((()=>(0,s._)("option",null,"警员",-1))),B=l((()=>(0,s._)("option",null,"警司",-1))),R=l((()=>(0,s._)("option",null,"警督",-1))),Y=l((()=>(0,s._)("option",null,"警监",-1))),$=l((()=>(0,s._)("option",null,"总警监",-1))),H=[P,Z,B,R,Y,$];function X(n,e,i,l,W,F){const z=(0,s.up)("el-header"),P=(0,s.up)("el-date-picker");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(z,{class:"sub-header",onMousemove:F.handleMouseMove},{default:(0,s.w5)((()=>[a])),_:1},8,["onMousemove"]),(0,s._)("div",{class:"container",onWheelPassive:e[11]||(e[11]=(0,t.iM)((()=>{}),["stop"]))},[r,(0,s._)("div",_,[(0,s._)("div",u,[c,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=n=>W.signinInfo.police_number=n)},null,512),[[t.nr,W.signinInfo.police_number]]),p,(0,s.wy)((0,s._)("div",{class:"message",style:(0,o.j5)({color:this.police_number_color})},(0,o.zw)(this.police_number_message),5),[[t.F8,""!==this.police_number_message]])])]),(0,s._)("div",d,[m,(0,s.wy)((0,s._)("input",{class:"input","onUpdate:modelValue":e[1]||(e[1]=n=>W.signinInfo.police_name=n)},null,512),[[t.nr,W.signinInfo.police_name]])]),(0,s._)("div",g,[h,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{class:"input","onUpdate:modelValue":e[2]||(e[2]=n=>W.signinInfo.ID_number=n)},null,512),[[t.nr,W.signinInfo.ID_number]]),b,(0,s.wy)((0,s._)("div",{class:"message",style:(0,o.j5)({color:this.ID_number_color})},(0,o.zw)(this.ID_number_message),5),[[t.F8,""!==this.ID_number_message]])])]),(0,s._)("div",I,[f,(0,s.Wm)(P,{disabled:!0,modelValue:W.signinInfo.birthday,"onUpdate:modelValue":e[3]||(e[3]=n=>W.signinInfo.birthday=n)},null,8,["modelValue"])]),(0,s._)("div",v,[y,(0,s.wy)((0,s._)("input",{class:"input",disabled:!0,"onUpdate:modelValue":e[4]||(e[4]=n=>W.signinInfo.gender=n)},null,512),[[t.nr,W.signinInfo.gender]])]),(0,s._)("div",w,[D,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{class:"input","onUpdate:modelValue":e[5]||(e[5]=n=>W.signinInfo.nation=n)},null,512),[[t.nr,W.signinInfo.nation]]),C,(0,s.wy)((0,s._)("div",{class:"message",style:(0,o.j5)({color:this.nation_color})},(0,o.zw)(this.nation_message),5),[[t.F8,""!==this.nation_message]])])]),(0,s._)("div",U,[T,(0,s.wy)((0,s._)("input",{class:"input","onUpdate:modelValue":e[6]||(e[6]=n=>W.signinInfo.phone_number=n)},null,512),[[t.nr,W.signinInfo.phone_number]])]),(0,s._)("div",V,[k,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{class:"input","onUpdate:modelValue":e[7]||(e[7]=n=>W.signinInfo.email=n)},null,512),[[t.nr,W.signinInfo.email]]),M,(0,s.wy)((0,s._)("div",{class:"message",style:(0,o.j5)({color:this.email_color})},(0,o.zw)(this.email_message),5),[[t.F8,""!==this.email_message]])])]),(0,s._)("div",q,[j,(0,s.wy)((0,s._)("select",{class:"select",placeholder:"请选择状态","onUpdate:modelValue":e[8]||(e[8]=n=>W.signinInfo.status=n)},L,512),[[t.bM,W.signinInfo.status]])]),(0,s._)("div",N,[x,(0,s.wy)((0,s._)("select",{class:"select",placeholder:"请选择职务","onUpdate:modelValue":e[9]||(e[9]=n=>W.signinInfo.position=n)},H,512),[[t.bM,W.signinInfo.position]])]),(0,s._)("button",{class:"button",onClick:e[10]||(e[10]=(...n)=>F.addNewUser&&F.addNewUser(...n))},"确定")])],32)],64)}var A=i(7138),E={data(){return{signinInfo:{police_number:"",police_name:"",ID_number:"",birthday:"",gender:"",nation:"",phone_number:"",email:"",status:"",position:""},police_number_message:"",police_number_color:"",ID_number_message:"",ID_number_color:"",nation_message:"",nation_color:"",email_message:"",email_color:""}},methods:{handleMouseMove(n){const e=n.pageX-n.target.offsetLeft,i=n.pageY-n.target.offsetTop;n.target.style.setProperty("--x",`${e}px`),n.target.style.setProperty("--y",`${i}px`)},addNewUser(){for(let n in this.signinInfo)if(""===this.signinInfo[n])return void alert("请填写完整信息");"green"===this.police_number_color&&"green"===this.ID_number_color&&"green"===this.nation_color&&"green"===this.email_color?("男"===this.signinInfo.gender?this.signinInfo.gender="M":this.signinInfo.gender="F",console.log(this.signinInfo),A.Z.put("/api/Register",this.signinInfo).then((n=>{"success"==n.data?alert("添加成功"):alert("网络错误，请重试")})).catch((n=>{console.error(n)}))):alert("请填写正确信息")},calcBirthday(n){let e=n.slice(0,4),i=n.slice(4,6),s=n.slice(6,8);this.signinInfo.birthday=e+"-"+i+"-"+s},checkLegal(n,e){A.Z.post("/api/Register",{queryType:n,queryContent:e}).then((e=>{"police_number"==n?"ok"===e.data?(this.police_number_message="✔",this.police_number_color="green"):(this.police_number_message="该警号已存在",this.police_number_color="red"):"ID_number"==n&&("ok"===e.data?(this.ID_number_message="✔",this.ID_number_color="green",this.signinInfo.gender=Number(this.signinInfo.ID_number[16])%2==1?"男":"女",this.calcBirthday(this.signinInfo.ID_number.slice(6,14))):(this.ID_number_message="该身份证号已注册过",this.ID_number_color="red"))})).catch((n=>{console.error(n)}))}},watch:{"signinInfo.police_number":function(n){7!=n.length?(this.police_number_message="✖",this.police_number_color="red"):(this.police_number_message="校验...",this.police_number_color="blue",this.checkLegal("police_number",n))},"signinInfo.ID_number":function(n){18!=n.length?(this.ID_number_message="✖",this.ID_number_color="red"):(this.ID_number_message="校验...",this.ID_number_color="blue",this.checkLegal("ID_number",n))},"signinInfo.nation":function(n){n.endsWith("族")?(this.nation_message="✔",this.nation_color="green"):(this.nation_message="请以“族”结尾",this.nation_color="red")},"signinInfo.email":function(n){n.includes("@")&&n.includes(".")&&!n.endsWith(".")&&!n.endsWith("@")?(this.email_message="✔",this.email_color="green"):(this.email_message="邮箱地址不正确",this.email_color="red")}}},G=i(89);const J=(0,G.Z)(E,[["render",X],["__scopeId","data-v-20ae6912"]]);var K=J}}]);
//# sourceMappingURL=734.7554afb1.js.map