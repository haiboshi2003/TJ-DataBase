"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[498],{8498:function(t,e,a){a.r(e),a.d(e,{default:function(){return B}});var s=a(3396),i=a(7139),c=a(9242);const l=t=>((0,s.dD)("data-v-4971a6f0"),t=t(),(0,s.Cn)(),t),o=l((()=>(0,s._)("div",null,"  案件管理 > 犯罪数据统计",-1))),n={class:"main"},d={class:"content"},h=l((()=>(0,s._)("div",{class:"top-content"},[(0,s._)("h2",{style:{"text-align":"center"}},"案件状态统计饼图"),(0,s._)("div",{id:"statusPieChart",style:{width:"400px",height:"400px","margin-left":"auto","margin-right":"auto"}})],-1))),r={class:"bottom-content"},y={class:"cdsamount"},u=l((()=>(0,s._)("option",{value:"全部",selected:""},"全部城市",-1))),p=["value"],m=l((()=>(0,s._)("option",{selected:"",value:"全部"},"全部年份",-1))),w=["value"],g=l((()=>(0,s._)("option",{selected:"",value:"全部"},"全部月份",-1))),S=["value"],v=l((()=>(0,s._)("div",{class:"top-content"},[(0,s._)("h2",{style:{"text-align":"center"}},"案件类型统计饼图"),(0,s._)("div",{id:"typePieChart",style:{width:"600px",height:"400px","margin-left":"auto","margin-right":"auto"}})],-1))),C={class:"bottom-content"},b={class:"cdsamount"},D=l((()=>(0,s._)("option",{value:"全部",selected:""},"全部城市",-1))),_=["value"],f=l((()=>(0,s._)("option",{selected:"",value:"全部"},"全部年份",-1))),M=["value"],Y=l((()=>(0,s._)("option",{selected:"",value:"全部"},"全部月份",-1))),x=["value"],T=l((()=>(0,s._)("div",{class:"top-content"},[(0,s._)("h2",{style:{"text-align":"center"}},"城市案件统计直方图"),(0,s._)("div",{id:"zhuChart",style:{width:"800px",height:"500px","margin-left":"auto","margin-right":"auto"}})],-1))),O={class:"bottom-content"},z={class:"cdsamount",style:{"margin-top":"-25px"}},I=l((()=>(0,s._)("div",{class:"top-content"},[(0,s._)("h2",{style:{"text-align":"center"}},"案件时间统计折线图"),(0,s._)("div",{id:"zheChart",style:{width:"600px",height:"400px","margin-left":"auto","margin-right":"auto"}})],-1))),P={class:"bottom-content"},W={class:"cdsamount"},Z=l((()=>(0,s._)("option",{value:"全部",selected:""},"全部城市",-1))),k=["value"],A=l((()=>(0,s._)("option",{selected:"",value:"年份"},"年份统计",-1))),j=l((()=>(0,s._)("option",{selected:"",value:"月份"},"月份统计",-1))),U=[A,j],R=l((()=>(0,s._)("option",{selected:"",value:"全部"},"全部年份",-1))),V=["value"];function H(t,e,a,l,A,j){const H=(0,s.up)("el-header"),K=(0,s.up)("el-tab-pane"),$=(0,s.up)("el-tabs");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(H,{class:"sub-header",onMousemove:j.handleMouseMove},{default:(0,s.w5)((()=>[o])),_:1},8,["onMousemove"]),(0,s._)("div",n,[(0,s._)("div",d,[(0,s.Wm)($,{modelValue:A.anv,"onUpdate:modelValue":e[9]||(e[9]=t=>A.anv=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{label:"案件状态统计饼图",name:"1"},{default:(0,s.w5)((()=>[h,(0,s._)("div",r,[(0,s._)("div",y,[(0,s._)("h3",null,"案件总数："+(0,i.zw)(A.numCases),1)]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>A.selectedCity1=t),class:"cds-select"},[u,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.cityName,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,i.zw)(t),9,p)))),128))],512),[[c.bM,A.selectedCity1]]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>A.selectedYear1=t),class:"cds-select"},[m,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.years,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,i.zw)(t),9,w)))),128))],512),[[c.bM,A.selectedYear1]]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>A.selectedMonth1=t),class:"cds-select"},[g,((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["1","2","3","4","5","6","7","8","9","10","11","12"],(t=>(0,s._)("option",{value:t,key:t},(0,i.zw)(t),9,S))),64))],512),[[c.bM,A.selectedMonth1]])])])),_:1}),(0,s.Wm)(K,{label:"案件类型统计饼图",name:"2"},{default:(0,s.w5)((()=>[v,(0,s._)("div",C,[(0,s._)("div",b,[(0,s._)("h3",null,"案件总数："+(0,i.zw)(A.numCases),1)]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>A.selectedCity2=t),class:"cds-select"},[D,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.cityName,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,i.zw)(t),9,_)))),128))],512),[[c.bM,A.selectedCity2]]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>A.selectedYear2=t),class:"cds-select"},[f,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.years,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,i.zw)(t),9,M)))),128))],512),[[c.bM,A.selectedYear2]]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>A.selectedMonth2=t),class:"cds-select"},[Y,((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["1","2","3","4","5","6","7","8","9","10","11","12"],(t=>(0,s._)("option",{value:t,key:t},(0,i.zw)(t),9,x))),64))],512),[[c.bM,A.selectedMonth2]])])])),_:1}),(0,s.Wm)(K,{label:"案发地区统计直方图",name:"3"},{default:(0,s.w5)((()=>[T,(0,s._)("div",O,[(0,s._)("div",z,[(0,s._)("h3",null,"案件总数："+(0,i.zw)(A.numCases),1)])])])),_:1}),(0,s.Wm)(K,{label:"案件时间统计折线图",name:"4"},{default:(0,s.w5)((()=>[I,(0,s._)("div",P,[(0,s._)("div",W,[(0,s._)("h3",null,"案件总数："+(0,i.zw)(A.numCases),1)]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>A.selectedCity3=t),class:"cds-select"},[Z,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.cityName,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,i.zw)(t),9,k)))),128))],512),[[c.bM,A.selectedCity3]]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>A.selectedMethod=t),class:"cds-select"},U,512),[[c.bM,A.selectedMethod]]),"月份"===A.selectedMethod?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,"onUpdate:modelValue":e[8]||(e[8]=t=>A.selectedYear3=t),class:"cds-select"},[R,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.years,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,i.zw)(t),9,V)))),128))],512)),[[c.bM,A.selectedYear3]]):(0,s.kq)("",!0)])])),_:1})])),_:1},8,["modelValue"])])])],64)}a(7658);var K=a(7138),$=a(9043),F={data(){return{anv:"1",numCases:0,statusStatistics:"默认",typeStatistics:"默认",cityStatistics:"默认",cityTypeStatistics:"默认",cityYearStatistics:"默认",cityName:"默认",selectedCity1:"全部",selectedYear1:"全部",selectedMonth1:"全部",selectedCity2:"全部",selectedYear2:"全部",selectedMonth2:"全部",selectedCity3:"全部",selectedYear3:"全部",cityDateStatistics:"默认",years:[],selectedMethod:"年份"}},methods:{handleMouseMove(t){const e=t.pageX-t.target.offsetLeft,a=t.pageY-t.target.offsetTop;t.target.style.setProperty("--x",`${e}px`),t.target.style.setProperty("--y",`${a}px`)},async getCityStatistics(){try{const t=await K.Z.get("/api/crimeDataStatistics/caseCityStatistics");this.cityStatistics=t.data}catch(t){alert(t),console.log("getCityStatistics出错！")}},async getCityDateStatistics(){try{const t=await K.Z.get("/api/crimeDataStatistics/cityDateStatistics",{params:{city:this.selectedCity3}});this.cityDateStatistics=t.data}catch(t){alert(t),console.log("getCityDateStatistics出错！")}},async getStatusCityDateStatistics(){try{const t=await K.Z.get(`/api/crimeDataStatistics/statusCityDateStatistics?city=${encodeURIComponent(this.selectedCity1)}&year=${encodeURIComponent(this.selectedYear1)}&month=${encodeURIComponent(this.selectedMonth1)}`);this.statusStatistics=t.data}catch(t){alert(t),console.log("getStatusCityDateStatistics出错！")}},async getCityTypeStatistics(){try{const t=await K.Z.get("/api/crimeDataStatistics/cityTypeStatistics");this.cityTypeStatistics=t.data}catch(t){alert(t),console.log("getCityTypeStatistics出错！")}},async getTypeCityDateStatistics(){try{const t=await K.Z.get(`/api/crimeDataStatistics/typeCityDateStatistics?city=${encodeURIComponent(this.selectedCity2)}&year=${encodeURIComponent(this.selectedYear2)}&month=${encodeURIComponent(this.selectedMonth2)}`);this.typeStatistics=t.data}catch(t){alert(t),console.log("getTypeCityDateStatistics出错！")}},drawStatusPieChart(){const t=$.S1(document.getElementById("statusPieChart")),e={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:this.statusStatistics["立案"],name:"立案"},{value:this.statusStatistics["调查"],name:"调查"},{value:this.statusStatistics["结案"],name:"结案"}]}]};e&&t.setOption(e)},drawTypePieChart(){const t=$.S1(document.getElementById("typePieChart")),e={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:this.typeStatistics["强奸"],name:"强奸"},{value:this.typeStatistics["抢劫"],name:"抢劫"},{value:this.typeStatistics["故意伤害"],name:"故意伤害"},{value:this.typeStatistics["盗窃"],name:"盗窃"},{value:this.typeStatistics["诈骗"],name:"诈骗"},{value:this.typeStatistics["谋杀"],name:"谋杀"}]}]};e&&t.setOption(e)},drawYearZheChart(){var t={};for(const[s,i]of Object.entries(this.cityDateStatistics)){let e=0;for(const t of Object.values(i))e+=t;t[s]=e}t=Object.values(t);const e=$.S1(document.getElementById("zheChart")),a={xAxis:{type:"category",data:this.years},yAxis:{type:"value"},series:[{data:t,type:"line"}]};a&&e.setOption(a)},drawMonthZheChart(){const t=$.S1(document.getElementById("zheChart"));var e;if("全部"!==this.selectedYear3)e={xAxis:{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yAxis:{type:"value"},series:[{data:[this.cityDateStatistics[this.selectedYear3]["1"],this.cityDateStatistics[this.selectedYear3]["2"],this.cityDateStatistics[this.selectedYear3]["3"],this.cityDateStatistics[this.selectedYear3]["4"],this.cityDateStatistics[this.selectedYear3]["5"],this.cityDateStatistics[this.selectedYear3]["6"],this.cityDateStatistics[this.selectedYear3]["7"],this.cityDateStatistics[this.selectedYear3]["8"],this.cityDateStatistics[this.selectedYear3]["9"],this.cityDateStatistics[this.selectedYear3]["10"],this.cityDateStatistics[this.selectedYear3]["11"],this.cityDateStatistics[this.selectedYear3]["12"]],type:"line"}]};else{var a={};for(const[t,e]of Object.entries(this.cityDateStatistics))for(const[s,i]of Object.entries(e))a[s]?a[s]+=i:a[s]=i;a=Object.values(a),e={xAxis:{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yAxis:{type:"value"},series:[{data:[a["1"],a["2"],a["3"],a["4"],a["5"],a["6"],a["7"],a["8"],a["9"],a["10"],a["11"],a["12"]],type:"line"}]}}e&&t.setOption(e)},drawZheChart(){"年份"===this.selectedMethod?this.drawYearZheChart():this.drawMonthZheChart()},drawTypeZhuChart(){var t={numRape:[],numRobbery:[],numInjury:[],numTheft:[],numFraud:[],numMurder:[]};for(const l in this.cityTypeStatistics)if(Object.prototype.hasOwnProperty.call(this.cityTypeStatistics,l)){const e=this.cityTypeStatistics[l];t.numRape.push(e[0]),t.numRobbery.push(e[1]),t.numInjury.push(e[2]),t.numTheft.push(e[3]),t.numFraud.push(e[4]),t.numMurder.push(e[5])}const e=Object.values(this.cityTypeStatistics),a=e.reduce(((t,e)=>t.concat(e)),[]);var s=Math.max(...a);const i=$.S1(document.getElementById("zhuChart")),c={tooltip:{trigger:"axis"},legend:{data:["强奸","抢劫","故意伤害","盗窃","诈骗","谋杀"]},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,dataZoom:[{type:"slider",show:!1,start:0,end:50,xAxisIndex:[0]},{type:"inside",start:0,end:30,xAxisIndex:[0],zoomOnMouseWheel:!1,moveOnMouseWheel:!0,moveOnMouseMove:!1}],xAxis:[{type:"category",data:Object.keys(this.cityTypeStatistics)}],yAxis:[{max:s,min:0,type:"value"}],series:[{name:"强奸",type:"bar",data:t.numRape,barWidth:"10%"},{name:"抢劫",type:"bar",data:t.numRobbery,barWidth:"10%"},{name:"故意伤害",type:"bar",data:t.numInjury,barWidth:"10%"},{name:"盗窃",type:"bar",data:t.numTheft,barWidth:"10%"},{name:"诈骗",type:"bar",data:t.numFraud,barWidth:"10%"},{name:"谋杀",type:"bar",data:t.numMurder,barWidth:"10%"}]};c&&i.setOption(c)}},watch:{async selectedCity1(){await this.getStatusCityDateStatistics(),this.drawStatusPieChart()},async selectedYear1(){await this.getStatusCityDateStatistics(),this.drawStatusPieChart()},async selectedMonth1(){await this.getStatusCityDateStatistics(),this.drawStatusPieChart()},async selectedCity2(){await this.getTypeCityDateStatistics(),this.drawTypePieChart()},async selectedYear2(){await this.getTypeCityDateStatistics(),this.drawTypePieChart()},async selectedMonth2(){await this.getTypeCityDateStatistics(),this.drawTypePieChart()},selectedYear3(){this.drawZheChart()},async selectedCity3(){await this.getCityDateStatistics(),this.drawZheChart()},async selectedMethod(){"年份"===this.selectedMethod||await this.getCityDateStatistics(),this.drawZheChart()},async anv(){"1"==this.anv?(await this.getStatusCityDateStatistics(),this.drawStatusPieChart()):"2"==this.anv?(await this.getTypeCityDateStatistics(),this.drawTypePieChart()):"3"==this.anv?(await this.getCityTypeStatistics(),this.drawTypeZhuChart()):"4"==this.anv&&(await this.getCityDateStatistics(),"年份"===this.selectedMethod||await this.getCityDateStatistics(),this.drawZheChart())}},async created(){await this.getCityStatistics(),await this.getStatusCityDateStatistics(),await this.getTypeCityDateStatistics(),await this.getCityDateStatistics(),this.years=Object.keys(this.cityDateStatistics),this.cityName=Object.keys(this.cityStatistics),this.numCases=this.statusStatistics["立案"]+this.statusStatistics["调查"]+this.statusStatistics["结案"],this.drawStatusPieChart(),console.log(11111),await this.getCityTypeStatistics()}},N=a(89);const J=(0,N.Z)(F,[["render",H],["__scopeId","data-v-4971a6f0"]]);var B=J}}]);
//# sourceMappingURL=498.f4349814.js.map