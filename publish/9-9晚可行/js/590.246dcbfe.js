"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[590],{4590:function(e,l,a){a.r(l),a.d(l,{default:function(){return k}});var t=a(3396),o=a(9242);const u=e=>((0,t.dD)("data-v-42a768e6"),e=e(),(0,t.Cn)(),e),i=u((()=>(0,t._)("div",null,"  装备管理 > 警械管理",-1))),n={style:{"text-align":"center"}},p={style:{display:"inline-block","text-align":"left"}},d={class:"seaButton"},s={style:{"text-align":"center"}},r={style:{display:"inline-block","text-align":"left"}},m=u((()=>(0,t._)("td",null,null,-1))),c={class:"seaButton"},h={style:{"text-align":"center"}},y={style:{display:"inline-block","text-align":"left"}},q={style:{"text-align":"center"}},w={style:{display:"inline-block","text-align":"left"}},f={class:"seaButton"},I={style:{"text-align":"center"}},g={style:{display:"inline-block","text-align":"left"}},_={class:"seaButton"};function b(e,l,a,u,b,U){const W=(0,t.up)("el-header"),v=(0,t.up)("el-text"),x=(0,t.up)("el-input"),E=(0,t.up)("el-option"),k=(0,t.up)("el-select"),C=(0,t.up)("el-button"),V=(0,t.up)("el-divider"),D=(0,t.up)("el-table-column"),R=(0,t.up)("el-table"),T=(0,t.up)("el-tab-pane"),S=(0,t.up)("el-tabs");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(W,{class:"sub-header",onMousemove:U.handleMouseMove},{default:(0,t.w5)((()=>[i])),_:1},8,["onMousemove"]),(0,t.Wm)(S,{modelValue:b.anv,"onUpdate:modelValue":l[14]||(l[14]=e=>b.anv=e),type:"border-card",style:{"margin-top":"10vh"}},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{label:"查询装备",name:"1"},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("table",p,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警械编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.equipId,"onUpdate:modelValue":l[0]||(l[0]=e=>b.equipId=e),placeholder:"请输入警械编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"7","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警械类型：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:b.equipType,"onUpdate:modelValue":l[1]||(l[1]=e=>b.equipType=e),placeholder:"请选择"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{selected:"",label:"全部类型",value:""}),(0,t.Wm)(E,{label:"催泪弹",value:"催泪弹"}),(0,t.Wm)(E,{label:"手枪",value:"手枪"}),(0,t.Wm)(E,{label:"手铐",value:"手铐"}),(0,t.Wm)(E,{label:"警棍",value:"警棍"}),(0,t.Wm)(E,{label:"防弹背心",value:"防弹背心"})])),_:1},8,["modelValue"])])]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警局编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.equipStation,"onUpdate:modelValue":l[2]||(l[2]=e=>b.equipStation=e),placeholder:"请输入警局编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"9","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("使用状态：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:b.equipStatus,"onUpdate:modelValue":l[3]||(l[3]=e=>b.equipStatus=e),placeholder:"请选择"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{selected:"",label:"全部状态",value:""}),(0,t.Wm)(E,{label:"使用中",value:"1"}),(0,t.Wm)(E,{label:"空闲",value:"0"})])),_:1},8,["modelValue"])])])]),(0,t._)("div",d,[(0,t.Wm)(C,{type:"primary",onClick:U.fetchEquipInfo},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1},8,["onClick"])])]),(0,t.Wm)(V),(0,t._)("div",null,[b.showEquip?((0,t.wg)(),(0,t.j4)(R,{key:0,data:b.chanEquipInfo,stripe:"",height:"450",onWheelPassive:l[4]||(l[4]=(0,o.iM)((()=>{}),["stop"]))},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{prop:"equipID",label:"警械编号",sortable:""}),(0,t.Wm)(D,{prop:"equipType",label:"警械类型",sortable:""}),(0,t.Wm)(D,{prop:"equipStation",label:"所属警局编号",sortable:""}),(0,t.Wm)(D,{prop:"equipStatus",label:"是否借出",sortable:""}),(0,t.Wm)(D,{align:"right",width:"100px"},{header:(0,t.w5)((()=>[])),default:(0,t.w5)((e=>[(0,t.Wm)(C,{size:"small",type:"primary",onClick:l=>U.equipUseRecord(e.$index,e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("使用记录")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,t.kq)("",!0),!b.showEquip&&b.equipUseInfo.length>0?((0,t.wg)(),(0,t.j4)(R,{key:1,data:b.equipUseInfo,stripe:"",height:"450",onWheelPassive:l[5]||(l[5]=(0,o.iM)((()=>{}),["stop"]))},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{prop:"equipID",label:"警车编号",sortable:""}),(0,t.Wm)(D,{prop:"policemenID",label:"使用的警员编号",sortable:""}),(0,t.Wm)(D,{prop:"borrowtime",label:"借出时间",sortable:""}),(0,t.Wm)(D,{prop:"returntime",label:"还回时间",sortable:""}),(0,t.Wm)(D,{align:"center",width:"80px"},{header:(0,t.w5)((()=>[(0,t.Wm)(C,{size:"small",type:"primary",onClick:U.back},{default:(0,t.w5)((()=>[(0,t.Uk)("返回")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["data"])):(0,t.kq)("",!0)])])),_:1}),(0,t.Wm)(T,{label:"新增警械",name:"2"},{default:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t._)("table",r,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警械编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.addEquipID,"onUpdate:modelValue":l[6]||(l[6]=e=>b.addEquipID=e),placeholder:"请输入警械编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"7","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警械类型：")])),_:1}),(0,t.Wm)(k,{class:"inputBox",modelValue:b.addEquipType,"onUpdate:modelValue":l[7]||(l[7]=e=>b.addEquipType=e),placeholder:"请选择"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{selected:"",label:"请选择",value:""}),(0,t.Wm)(E,{label:"催泪弹",value:"催泪弹"}),(0,t.Wm)(E,{label:"手枪",value:"手枪"}),(0,t.Wm)(E,{label:"手铐",value:"手铐"}),(0,t.Wm)(E,{label:"警棍",value:"警棍"}),(0,t.Wm)(E,{label:"防弹背心",value:"防弹背心"})])),_:1},8,["modelValue"])])]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警局编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.addEquipStation,"onUpdate:modelValue":l[8]||(l[8]=e=>b.addEquipStation=e),placeholder:"请输入警局编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"9","show-word-limit":""},null,8,["modelValue"])]),m])]),(0,t._)("div",c,[(0,t.Wm)(C,{type:"primary",onClick:U.addEquipInfo},{default:(0,t.w5)((()=>[(0,t.Uk)("上传")])),_:1},8,["onClick"])])])])),_:1}),(0,t.Wm)(T,{label:"删除警械",name:"3"},{default:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t._)("table",y,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警械编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.delEquipID,"onUpdate:modelValue":l[9]||(l[9]=e=>b.delEquipID=e),placeholder:"请输入警械编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"7","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(C,{type:"primary",onClick:U.delEquipInfo,style:{"margin-left":"20px"}},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:1},8,["onClick"])])])])])])),_:1}),(0,t.Wm)(T,{label:"使用登记",name:"4"},{default:(0,t.w5)((()=>[(0,t._)("div",q,[(0,t._)("table",w,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警械编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.addEquipIDU,"onUpdate:modelValue":l[10]||(l[10]=e=>b.addEquipIDU=e),placeholder:"请输入警械编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"7","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警员编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.addPolicemenIDU,"onUpdate:modelValue":l[11]||(l[11]=e=>b.addPolicemenIDU=e),placeholder:"请输入警员编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"7","show-word-limit":""},null,8,["modelValue"])])])]),(0,t._)("div",f,[(0,t.Wm)(C,{type:"primary",onClick:U.addEquipUseRecord},{default:(0,t.w5)((()=>[(0,t.Uk)("上传")])),_:1},8,["onClick"])])])])),_:1}),(0,t.Wm)(T,{label:"归还登记",name:"5"},{default:(0,t.w5)((()=>[(0,t._)("div",I,[(0,t._)("table",g,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警械编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.addEquipIDR,"onUpdate:modelValue":l[12]||(l[12]=e=>b.addEquipIDR=e),placeholder:"请输入警械编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"7","show-word-limit":""},null,8,["modelValue"])]),(0,t._)("td",null,[(0,t.Wm)(v,{class:"noteText",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("警员编号：")])),_:1}),(0,t.Wm)(x,{class:"inputBox",modelValue:b.addPolicemenIDR,"onUpdate:modelValue":l[13]||(l[13]=e=>b.addPolicemenIDR=e),placeholder:"请输入警员编号",oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:"",maxlength:"7","show-word-limit":""},null,8,["modelValue"])])])]),(0,t._)("div",_,[(0,t.Wm)(C,{type:"primary",onClick:U.returnEquip},{default:(0,t.w5)((()=>[(0,t.Uk)("归还")])),_:1},8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"])],64)}var U=a(7138),W=a(7178),v={data(){return{anv:"1",showEquip:!0,equipId:"",equipType:"",equipStation:"",equipStatus:"",equipInfo:[],chanEquipInfo:[],equipUseInfo:[],addEquipID:"",addEquipType:"",addEquipStation:"",delEquipID:"",addEquipIDU:"",addPolicemenIDU:"",addEquipIDR:"",addPolicemenIDR:"",err:"警车不存在！"}},methods:{handleMouseMove(e){const l=e.pageX-e.target.offsetLeft,a=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",`${l}px`),e.target.style.setProperty("--y",`${a}px`)},async fetchEquipInfo(){try{const e=await U.Z.get(`/api/EquipList?equipId=${encodeURIComponent(this.equipId)}&equipType=${encodeURIComponent(this.equipType)}&equipStation=${encodeURIComponent(this.equipStation)}&equipStatus=${encodeURIComponent(this.equipStatus)}`);this.equipInfo=e.data,this.chanEquipInfo=this.equipInfo.map((e=>"0"===e.equipStatus?{...e,equipStatus:"空闲"}:"1"===e.equipStatus?{...e,equipStatus:"使用中"}:e))}catch(e){(0,W.z8)({showClose:!0,message:"获取警械列表失败！",type:"error",duration:5e3})}},async addEquipInfo(){try{const e=await U.Z.post(`/api/addEquip?equipID=${encodeURIComponent(this.addEquipID)}&equipType=${encodeURIComponent(this.addEquipType)}&equipStation=${encodeURIComponent(this.addEquipStation)}`);"string"==typeof e.data?(0,W.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(await this.fetchEquipInfo(),(0,W.z8)({showClose:!0,message:"新增警械成功! ",type:"success",duration:5e3}))}catch(e){(0,W.z8)({showClose:!0,message:"新增警械失败！",type:"error",duration:5e3})}},async delEquipInfo(){try{const e=await U.Z.delete(`/api/delEquip?equipID=${encodeURIComponent(this.delEquipID)}`);"string"==typeof e.data?(0,W.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(await this.fetchEquipInfo(),(0,W.z8)({showClose:!0,message:"删除警械成功! ",type:"success",duration:5e3}))}catch(e){(0,W.z8)({showClose:!0,message:"删除警械失败！",type:"error",duration:5e3})}},async equipUseRecord(e,l){try{const e=await U.Z.get(`/api/equipUseInfo?equipID=${encodeURIComponent(l.equipID)}`);this.equipUseInfo=e.data,this.equipUseInfo=this.equipUseInfo.map((e=>(null===e.returntime&&(e.returntime="————"),e))),0==e.data.length?(0,W.z8)({showClose:!0,message:"该警械暂无使用记录",duration:5e3}):this.showEquip=!1}catch(a){console.log(a),(0,W.z8)({showClose:!0,message:"获取警械使用记录失败！",type:"error",duration:5e3})}},async back(){this.equipUseInfo="",this.showEquip=!0},async addEquipUseRecord(){try{const e=await U.Z.post(`/api/addEquipUseRecord?equipID=${encodeURIComponent(this.addEquipIDU)}&policemenID=${encodeURIComponent(this.addPolicemenIDU)}`);"string"==typeof e.data?(0,W.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(0,W.z8)({showClose:!0,message:"登记成功! ",type:"success",duration:5e3})}catch(e){(0,W.z8)({showClose:!0,message:"登记失败！",type:"error",duration:5e3})}},async returnEquip(){try{const e=await U.Z.put(`/api/returnEquip?equipID=${encodeURIComponent(this.addEquipIDR)}&policemenID=${encodeURIComponent(this.addPolicemenIDR)}`);"string"==typeof e.data?(0,W.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(await this.fetchEquipInfo(),(0,W.z8)({showClose:!0,message:"归还成功! ",type:"success",duration:5e3}))}catch(e){(0,W.z8)({showClose:!0,message:"归还失败！",type:"error",duration:5e3})}}}},x=a(89);const E=(0,x.Z)(v,[["render",b],["__scopeId","data-v-42a768e6"]]);var k=E}}]);
//# sourceMappingURL=590.246dcbfe.js.map