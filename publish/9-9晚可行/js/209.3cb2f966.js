"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[209],{1209:function(e,o,t){t.r(o),t.d(o,{default:function(){return M}});var l=t(3396),a=t(9242),s=t(7139);const n=e=>((0,l.dD)("data-v-27523a73"),e=e(),(0,l.Cn)(),e),i=n((()=>(0,l._)("div",null,"  警员管理 > 警员考核管理",-1))),p={class:"content"},c={style:{"margin-top":"10px","margin-left":"50px","font-size":"20px"}},d=n((()=>(0,l._)("div",{style:{"margin-top":"40px","margin-left":"40px",display:"inline-block",color:"#524c3e"}},[(0,l._)("b",null,"搜索警员    ")],-1))),u=n((()=>(0,l._)("span",{class:"ssqpoptip"},"仅支持警号搜索!",-1))),r=n((()=>(0,l._)("span",null,"搜索",-1))),m=[r],h={key:0,class:"custom-table"},_=n((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{style:{width:"100px"}},"警号"),(0,l._)("th",{style:{width:"100px"}},"姓名"),(0,l._)("th",{style:{width:"200px"}},"当前职位")])],-1))),b={class:"cell-spacing"},f={class:"cell-spacing"},g={class:"cell-spacing"},y={key:1},v={style:{"margin-top":"30px","margin-left":"90px","font-size":"20px"}},k=n((()=>(0,l._)("label",{style:{color:"#524c3e"}},[(0,l._)("b",null,"申请修改至职位:    ")],-1))),x=(0,l.uE)('<option value="学员" data-v-27523a73>学员</option><option value="警员" data-v-27523a73>警员</option><option value="警督" data-v-27523a73>警督</option><option value="警司" data-v-27523a73>警司</option><option value="警监" data-v-27523a73>警监</option><option value="总警监" data-v-27523a73>总警监</option>',6),w=[x],P={style:{"margin-top":"20px","margin-left":"90px","font-size":"20px"}},I=n((()=>(0,l._)("label",{style:{top:"5px",color:"#524c3e"}},[(0,l._)("b",null,"请输入修改原因:    ")],-1))),C=n((()=>(0,l._)("span",null,"确认修改",-1))),V=[C];function U(e,o,t,n,r,x){const C=(0,l.up)("el-header"),U=(0,l.up)("el-input"),F=(0,l.up)("el-button"),N=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(C,{class:"sub-header",onMousemove:x.handleMouseMove},{default:(0,l.w5)((()=>[i])),_:1},8,["onMousemove"]),(0,l._)("div",{class:"container",onWheelPassive:o[8]||(o[8]=(0,a.iM)((()=>{}),["stop"]))},[(0,l._)("div",p,[(0,l._)("div",c,[d,(0,l.wy)((0,l._)("input",{style:{display:"inline-block"},"onUpdate:modelValue":o[0]||(o[0]=e=>r.policeNumber=e),placeholder:"请输入正确的警号"},null,512),[[a.nr,r.policeNumber]]),u]),(0,l._)("button",{class:"cpbutton",onClick:o[1]||(o[1]=(...e)=>x.searchPolice&&x.searchPolice(...e))},m),r.policeInfo?((0,l.wg)(),(0,l.iD)("table",h,[_,(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",b,(0,s.zw)(r.policeInfo.police_number),1),(0,l._)("td",f,(0,s.zw)(r.policeInfo.police_name),1),(0,l._)("td",g,(0,s.zw)(r.policeInfo.position),1)])])])):(0,l.kq)("",!0),r.policeInfo?((0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("div",v,[k,(0,l.wy)((0,l._)("select",{class:"select","onUpdate:modelValue":o[2]||(o[2]=e=>r.selectedPosition=e)},w,512),[[a.bM,r.selectedPosition]])]),(0,l._)("div",P,[I,(0,l.Wm)(U,{class:"reasoninput",type:"textarea",modelValue:r.reason,"onUpdate:modelValue":o[3]||(o[3]=e=>r.reason=e)},null,8,["modelValue"])]),(0,l._)("button",{class:"cpbutton",style:{"line-height":"40px",width:"200px"},onClick:o[4]||(o[4]=(...e)=>x.updatePosition&&x.updatePosition(...e))},V),(0,l.Wm)(N,{title:"申请成功",modelValue:r.updateSuccess,"onUpdate:modelValue":o[5]||(o[5]=e=>r.updateSuccess=e),class:"success-message"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 修改成功 "),(0,l.Wm)(F,{style:{display:"block","margin-top":"20px"},onClick:x.handleClose},{default:(0,l.w5)((()=>[(0,l.Uk)("确认")])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),(0,l.Wm)(N,{title:"申请失败",modelValue:r.updateFailed,"onUpdate:modelValue":o[6]||(o[6]=e=>r.updateFailed=e),class:"error-message"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 申请失败! "),(0,l.Wm)(F,{style:{display:"block","margin-top":"20px"},onClick:x.handleClose},{default:(0,l.w5)((()=>[(0,l.Uk)("确认")])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),(0,l.Wm)(N,{title:"提示",modelValue:r.policeNotFound,"onUpdate:modelValue":o[7]||(o[7]=e=>r.policeNotFound=e),class:"error-message"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 未找到警员信息! "),(0,l.Wm)(F,{style:{display:"block","margin-top":"20px"},onClick:x.handleClose},{default:(0,l.w5)((()=>[(0,l.Uk)("确认")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])):(0,l.kq)("",!0)])],32)],64)}var F=t(7138),N={data(){return{policeNumber:"",policeInfo:null,selectedPosition:"",reason:"",updateSuccess:!1,updateFailed:!1,policeNotFound:!1}},methods:{searchPolice(){this.policeInfo=F.Z.post("/api/search",{temp:this.policeNumber}).then((e=>{console.log(e.data),"未找到警员信息"==e.data?this.policeNotFound=!0:this.policeInfo=e.data})).catch((e=>{console.error(e),this.policeInfo=null}))},async updatePosition(){const e=await this.updatePositionInDatabase(this.policeInfo,this.selectedPosition,this.reason);e?(this.updateSuccess=!0,this.updateFailed=!1,this.searchPolice()):(this.updateSuccess=!1,this.updateFailed=!0)},updatePositionInDatabase(e,o,t){return new Promise(((t,l)=>{F.Z.post("/api/position",{police_number:e.police_number,police_name:e.police_name,position:o,ID_number:e.ID_number,phone_number:e.phone_number,gender:e.gender}).then((e=>{this.policeInfo=e.data,t(!0)})).catch((e=>{console.error(e),t(!1)}))}))},handleMouseMove(e){const o=e.pageX-e.target.offsetLeft,t=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",`${o}px`),e.target.style.setProperty("--y",`${t}px`)},handleClose(){this.updateSuccess=!1,this.updateFailed=!1,this.policeNotFound=!1,location.reload()}}},W=t(89);const D=(0,W.Z)(N,[["render",U],["__scopeId","data-v-27523a73"]]);var M=D}}]);
//# sourceMappingURL=209.3cb2f966.js.map