"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[74],{74:function(e,o,t){t.r(o),t.d(o,{default:function(){return I}});var i=t(3396),a=t(9242),n=t(7139);const s=e=>((0,i.dD)("data-v-ea59de64"),e=e(),(0,i.Cn)(),e),l={key:0},p=(0,i.uE)('<option value="学员" data-v-ea59de64>学员</option><option value="警员" data-v-ea59de64>警员</option><option value="警督" data-v-ea59de64>警督</option><option value="警司" data-v-ea59de64>警司</option><option value="警监" data-v-ea59de64>警监</option><option value="总警监" data-v-ea59de64>总警监</option>',6),c=[p],d={key:0,class:"success-message"},u={key:1,class:"error-message"},r={key:1},h=s((()=>(0,i._)("p",null,"未找到警员信息",-1))),v=[h];function m(e,o,t,s,p,h){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>p.policeNumber=e),placeholder:"输入警号"},null,512),[[a.nr,p.policeNumber]]),(0,i._)("button",{onClick:o[1]||(o[1]=(...e)=>h.searchPolice&&h.searchPolice(...e))},"搜索"),p.policeInfo?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("p",null,"警员姓名："+(0,n.zw)(p.policeInfo.police_name),1),(0,i._)("p",null,"当前职位："+(0,n.zw)(p.policeInfo.position),1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>p.selectedPosition=e)},c,512),[[a.bM,p.selectedPosition]]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>p.reason=e),placeholder:"输入修改原因"},null,512),[[a.nr,p.reason]]),(0,i._)("button",{onClick:o[4]||(o[4]=(...e)=>h.updatePosition&&h.updatePosition(...e))},"确认修改"),p.updateSuccess?((0,i.wg)(),(0,i.iD)("div",d,"修改成功")):p.updateFailed?((0,i.wg)(),(0,i.iD)("div",u,"申请失败")):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",r,v))])}var b=t(7138),_={data(){return{policeNumber:"",policeInfo:null,selectedPosition:"",reason:"",updateSuccess:!1,updateFailed:!1}},methods:{searchPolice(){this.policeInfo=b.Z.post("/api/search",{temp:this.policeNumber}).then((e=>{this.policeInfo=e.data})).catch((e=>{console.error(e),this.policeInfo=null}))},async updatePosition(){const e=await this.updatePositionInDatabase(this.policeInfo,this.selectedPosition,this.reason);e?(this.updateSuccess=!0,this.updateFailed=!1,this.searchPolice()):(this.updateSuccess=!1,this.updateFailed=!0)},updatePositionInDatabase(e,o,t){return new Promise(((t,i)=>{b.Z.post("/api/position",{police_number:e.police_number,police_name:e.police_name,position:o,ID_number:e.ID_number,phone_number:e.phone_number,gender:e.gender}).then((e=>{this.policeInfo=e.data,t(!0)})).catch((e=>{console.error(e),t(!1)}))}))}}},f=t(89);const w=(0,f.Z)(_,[["render",m],["__scopeId","data-v-ea59de64"]]);var I=w}}]);
//# sourceMappingURL=74.30f4c848.js.map