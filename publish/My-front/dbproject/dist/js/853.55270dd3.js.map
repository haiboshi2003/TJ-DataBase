{"version":3,"file":"js/853.55270dd3.js","mappings":"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","sources":["webpack://dbproject/./src/components/login/ForPassword.vue","webpack://dbproject/./src/components/login/ForPassword.vue?a3eb"],"sourcesContent":["<template>\r\n  <div class=\"body\">\r\n    <div class=\"headpic\">\r\n      <img class=\"logo\" src=\"../../assets/image-2.png\" />\r\n      <div class=\"title\">&nbsp;&nbsp;警务处理系统</div>\r\n    </div>\r\n\r\n    <div class=\"change-password-page\">\r\n      <div class=\"change-password-container\">\r\n        <p class=\"forget-text\">忘记密码</p>\r\n        <p class=\"setnew-text\">设置新密码</p>\r\n        <form @submit.prevent=\"submitForm\">\r\n          <div class=\"input-container\">\r\n            <input\r\n              id=\"phoneNumber\"\r\n              type=\"text\"\r\n              v-model=\"phoneNumber\"\r\n              autocomplete=\"off\"\r\n              @focus=\"handleFocus1\"\r\n              @blur=\"handleBlur1\"\r\n              required\r\n            />\r\n            <div class=\"Tip\" :class=\"{ TipA: isFocused1 }\">手机号:</div>\r\n          </div>\r\n          <div class=\"input-container\">\r\n            <input\r\n              id=\"code-input\"\r\n              type=\"text\"\r\n              v-model=\"verificationCode\"\r\n              autocomplete=\"off\"\r\n              @focus=\"handleFocus2\"\r\n              @blur=\"handleBlur2\"\r\n              required\r\n            />\r\n            <div class=\"Tip\" :class=\"{ TipA: isFocused2 }\">手机验证码:</div>\r\n          </div>\r\n          <div>\r\n            <button\r\n              v-if=\"isSendingCode2\"\r\n              type=\"button\"\r\n              @click=\"sendVerificationCode\"\r\n              :disabled=\"isSendingCode\"\r\n            >\r\n              {{ isSendingCode ? \"发送中...\" : \"发送验证码\" }}\r\n            </button>\r\n            <button\r\n              v-if=\"!isSendingCode2\"\r\n              type=\"button\"\r\n              @click=\"sendVerificationCode\"\r\n              :disabled=\"true\"\r\n            >\r\n              {{ \"发送验证码\" }}\r\n            </button>\r\n          </div>\r\n          <div class=\"input-container\">\r\n            <input\r\n              id=\"newPassword\"\r\n              type=\"password\"\r\n              v-model=\"newPassword\"\r\n              autocomplete=\"off\"\r\n              @focus=\"handleFocus3\"\r\n              @blur=\"handleBlur3\"\r\n              required\r\n            />\r\n            <div class=\"Tip\" :class=\"{ TipA: isFocused3 }\">新密码:</div>\r\n          </div>\r\n          <div class=\"input-container\">\r\n            <input\r\n              id=\"confirmPassword\"\r\n              type=\"password\"\r\n              v-model=\"confirmPassword\"\r\n              autocomplete=\"off\"\r\n              @focus=\"handleFocus4\"\r\n              @blur=\"handleBlur4\"\r\n              required\r\n            />\r\n            <div class=\"Tip\" :class=\"{ TipA: isFocused4 }\">确认密码:</div>\r\n          </div>\r\n          <button type=\"submit\" class=\"confirm-button\">确认</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"../../api/request\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      policeNumber: \"\",\r\n      phoneNumber: \"\",\r\n      verificationCode: \"\",\r\n      newPassword: \"\",\r\n      confirmPassword: \"\",\r\n      isSendingCode: false,\r\n      isSendingCode2: true,\r\n      isFocused1: false,\r\n      isFocused2: false,\r\n      isFocused3: false,\r\n      isFocused4: false,\r\n    };\r\n  },\r\n  methods: {\r\n    handleFocus1() {\r\n      this.isFocused1 = true;\r\n      console.log(\"点击了\");\r\n    },\r\n    handleBlur1() {\r\n      let val = document.getElementById(\"phoneNumber\").value;\r\n      if (!val) {\r\n        this.isFocused1 = false;\r\n      }\r\n    },\r\n    handleFocus2() {\r\n      this.isFocused2 = true;\r\n      console.log(\"点击了\");\r\n    },\r\n    handleBlur2() {\r\n      let val = document.getElementById(\"code-input\").value;\r\n      if (!val) {\r\n        this.isFocused2 = false;\r\n      }\r\n    },\r\n    handleFocus3() {\r\n      this.isFocused3 = true;\r\n      console.log(\"点击了\");\r\n    },\r\n    handleBlur3() {\r\n      let val = document.getElementById(\"newPassword\").value;\r\n      if (!val) {\r\n        this.isFocused3 = false;\r\n      }\r\n    },\r\n    handleFocus4() {\r\n      this.isFocused4 = true;\r\n      console.log(\"点击了\");\r\n    },\r\n    handleBlur4() {\r\n      let val = document.getElementById(\"confirmPassword\").value;\r\n      if (!val) {\r\n        this.isFocused4 = false;\r\n      }\r\n    },\r\n    submitForm() {\r\n      // 提交表单逻辑  检查新密码和确认密码是否一致\r\n      if (this.newPassword !== this.confirmPassword) {\r\n        console.error(\"新密码和确认密码不一致\");\r\n        return;\r\n      }\r\n\r\n      const data = {\r\n        police_number: this.policeNumber, // 获取警号\r\n        phone_number: this.phoneNumber,\r\n        verificationCode: this.verificationCode,\r\n        newPassword: this.newPassword,\r\n      };\r\n\r\n      // 发送密码修改请求\r\n      const apiUrl = \"/for-password\"; // 根据你的后端接口路径\r\n      axios\r\n        .post(apiUrl, data)\r\n        .then((response) => {\r\n          console.log(\"密码修改成功！\");\r\n          // 密码修改成功后跳转到成功页面\r\n          this.$router.push(\"/ForPassword/success\");\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"密码修改失败：\", error);\r\n        });\r\n    },\r\n    sendVerificationCode() {\r\n      // 发送验证码逻辑\r\n      this.isSendingCode = true;\r\n\r\n      const apiUrl = \"/for-passsword/verification\";\r\n      const phoneNumber = this.phoneNumber; // 获取用户输入的手机号\r\n\r\n      axios\r\n        .post(apiUrl, { phone_number: phoneNumber }) // 使用axios.post() 发起POST请求，并传递手机号\r\n        .then((response) => {\r\n          console.log(\"验证码发送成功！\");\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"发送验证码失败：\", error);\r\n        })\r\n        .finally(() => {\r\n          setTimeout(() => {\r\n            this.isSendingCode = false;\r\n            this.isSendingCode2 = false;\r\n          }, 2000);\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    // 从 sessionStorage 中获取令牌\r\n    const token = sessionStorage.getItem(\"token\");\r\n    // 获取传递过来的ID参数\r\n    this.policeNumber = this.$route.query.id;\r\n\r\n    if (!token) {\r\n      // 令牌不存在，说明未经过身份验证，跳转回登录页面或其他处理\r\n      this.$router.push(\"/fail\");\r\n      return;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"postcss\" scoped>\r\n.body {\r\n  background-image: url(\"../../assets/hellopolice.jpg\");\r\n  background-attachment: fixed;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  height: 120vh;\r\n  overflow: auto;\r\n}\r\n\r\n.headpic {\r\n  background: #1f2cdf;\r\n  background-image: url(\"../../assets/hdtest.jpg\"); /* 替换为你的背景图路径 */\r\n  background-size: contain;\r\n  background-position: right top; /* 背景图靠左上角 */\r\n  background-repeat: no-repeat;\r\n  width: 100%;\r\n  height: 70px;\r\n  overflow: hidden;\r\n  position: relative;\r\n  left: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  padding-left: 20px;\r\n  .logo {\r\n    width: 70px;\r\n    height: 70px;\r\n    position: relative;\r\n    top: 2px;\r\n    left: 0px;\r\n  }\r\n  .title {\r\n    color: #ffffff;\r\n    text-align: left;\r\n    font: 400 36px \"Inter\", sans-serif;\r\n    display: inline-block;\r\n  }\r\n}\r\n\r\n.change-password-container {\r\n  flex-direction: column;\r\n  display: flex;\r\n  margin: 0 auto;\r\n  margin-top: 50px;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n  height: 80%;\r\n  width: 30%;\r\n  max-width: 35%;\r\n  min-width: 400px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 0.3em;\r\n  backdrop-filter: blur(2px);\r\n  background-color: #2b2828ba;\r\n  box-shadow: 0 0 0 10px hsla(0, 2%, 73%, 0.711) inset,\r\n    0 0.3em 1em rgba(0, 0, 0, 0.12);\r\n}\r\n.forget-text {\r\n  color: #fff;\r\n  font-size: 40px; /* 字号大小 */\r\n  font-weight: bold; /* 字体加粗 */\r\n  margin-top: 1px;\r\n}\r\n.setnew-text {\r\n  color: #fff;\r\n  margin-top: 1px;\r\n  font-size: 20px; /* 字号大小 */\r\n  font-weight: bold; /* 字体加粗 */\r\n}\r\n.input-container {\r\n  display: flex;\r\n  position: relative;\r\n  width: 400px;\r\n  height: 80px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n  font-size: 20px;\r\n}\r\n\r\n#phoneNumber {\r\n  display: inline-block;\r\n  width: 300px;\r\n  height: 30px;\r\n  color: #0ff;\r\n  font-size: 20px;\r\n  border: 0px transparent;\r\n  border-bottom: 3px solid #fff;\r\n  background-color: transparent;\r\n}\r\n\r\n#phoneNumber:focus {\r\n  outline: none;\r\n  border-bottom: 3px solid #0ff;\r\n}\r\n\r\n#code-input {\r\n  display: inline-block;\r\n  width: 300px;\r\n  height: 30px;\r\n  color: #0ff;\r\n  font-size: 20px;\r\n  border: 0px transparent;\r\n  border-bottom: 3px solid #fff;\r\n  background-color: transparent;\r\n}\r\n\r\n#code-input:focus {\r\n  outline: none;\r\n  border-bottom: 3px solid #0ff;\r\n}\r\n\r\n#newPassword {\r\n  display: inline-block;\r\n  width: 300px;\r\n  height: 30px;\r\n  color: #0ff;\r\n  font-size: 20px;\r\n  border: 0px transparent;\r\n  border-bottom: 3px solid #fff;\r\n  background-color: transparent;\r\n}\r\n\r\n#newPassword:focus {\r\n  outline: none;\r\n  border-bottom: 3px solid #0ff;\r\n}\r\n\r\n#confirmPassword {\r\n  display: inline-block;\r\n  width: 300px;\r\n  height: 30px;\r\n  color: #0ff;\r\n  font-size: 20px;\r\n  border: 0px transparent;\r\n  border-bottom: 3px solid #fff;\r\n  background-color: transparent;\r\n}\r\n\r\n#confirmPassword:focus {\r\n  outline: none;\r\n  border-bottom: 3px solid #0ff;\r\n}\r\n\r\n.Tip {\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 20px;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #fff;\r\n}\r\n@keyframes user {\r\n  from {\r\n    top: 0px;\r\n    font-size: 20px;\r\n  }\r\n  to {\r\n    top: -20px;\r\n    font-size: 17px;\r\n    color: rgb(12, 235, 179);\r\n  }\r\n}\r\n\r\n.TipA {\r\n  animation: user 0.3s linear normal forwards;\r\n  animation-iteration-count: 1;\r\n}\r\n\r\nbutton {\r\n  margin-left: 50px;\r\n  margin-bottom: 5px;\r\n  background-color: #1890ff;\r\n  padding: 10px 20px;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n\r\nbutton:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n.confirm-button {\r\n  margin-bottom: 10px;\r\n}\r\n.confirm-button:hover {\r\n  background-color: #40a9ff;\r\n}\r\n</style>\r\n","import { render } from \"./ForPassword.vue?vue&type=template&id=648f21be&scoped=true\"\nimport script from \"./ForPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ForPassword.vue?vue&type=script&lang=js\"\n\nimport \"./ForPassword.vue?vue&type=style&index=0&id=648f21be&lang=postcss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-648f21be\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onSubmit","_cache","_withModifiers","args","$options","submitForm","_hoisted_7","id","$data","phoneNumber","$event","autocomplete","onFocus","handleFocus1","onBlur","handleBlur1","required","_normalizeClass","TipA","isFocused1","_hoisted_8","verificationCode","handleFocus2","handleBlur2","isFocused2","isSendingCode2","onClick","sendVerificationCode","disabled","isSendingCode","_hoisted_9","_hoisted_10","newPassword","handleFocus3","handleBlur3","isFocused3","_hoisted_11","confirmPassword","handleFocus4","handleBlur4","isFocused4","_hoisted_12","data","policeNumber","methods","this","console","log","val","document","getElementById","value","error","police_number","phone_number","apiUrl","axios","post","then","response","$router","push","catch","finally","setTimeout","mounted","token","sessionStorage","getItem","$route","query","__exports__","render"],"sourceRoot":""}