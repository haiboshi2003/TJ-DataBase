"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[316],{316:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var l=a(3396),s=a(9242),i=a(7139);const o=(0,l._)("div",null,"  警务处理系统 > 案件办理",-1),n={key:1,style:{"text-align":"center"}},r={key:2,style:{"text-align":"center"}};function p(e,t,a,p,c,d){const m=(0,l.up)("el-header"),h=(0,l.up)("el-table-column"),u=(0,l.up)("el-text"),g=(0,l.up)("el-input"),y=(0,l.up)("el-button"),w=(0,l.up)("el-table"),b=(0,l.up)("el-result");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(m,{class:"sub-header",onMousemove:d.handleMouseMove},{default:(0,l.w5)((()=>[o])),_:1},8,["onMousemove"]),"待调查案件"===c.process?((0,l.wg)(),(0,l.j4)(w,{key:0,data:c.cases,height:"450",onWheelPassive:t[1]||(t[1]=(0,s.iM)((()=>{}),["stop"])),stripe:"",style:{width:"100%","margin-top":"10vh"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{label:"案件编号",prop:"caseID",sortable:"",width:"104px"}),(0,l.Wm)(h,{label:"案件类型",prop:"caseType",sortable:"",width:"104px"}),(0,l.Wm)(h,{label:"案件状态",prop:"status",sortable:"",width:"104px"}),(0,l.Wm)(h,{label:"登记时间",prop:"registerTime",width:"105px",sortable:""}),(0,l.Wm)(h,{label:"案发地点",prop:"address",sortable:""}),(0,l.Wm)(h,{label:"案件等级",prop:"ranking",sortable:"",width:"104px"}),(0,l.Wm)(h,{align:"right",width:"268px"},{header:(0,l.w5)((()=>[(0,l._)("table",null,[(0,l._)("tr",null,[(0,l._)("td",null,[(0,l.Wm)(u,{type:"primary",style:{display:"inline-block"}},{default:(0,l.w5)((()=>[(0,l.Uk)("筛选案件编号：")])),_:1})]),(0,l._)("td",null,[(0,l.Wm)(g,{modelValue:c.caseID,"onUpdate:modelValue":t[0]||(t[0]=e=>c.caseID=e),size:"small",placeholder:"请输入案件编号",style:{display:"inline-block",width:"130px",height:"25px"},clearable:"",maxlength:"8"},null,8,["modelValue"])])])])])),default:(0,l.w5)((e=>[(0,l.Wm)(y,{size:"small",type:"primary",onClick:t=>d.setTeam(e.$index,e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("进行调查")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,l.kq)("",!0),"选择办案人员"===c.process?((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(w,{data:c.policemen,height:"400",onSelectionChange:d.selectPolicemen,onWheelPassive:t[3]||(t[3]=(0,s.iM)((()=>{}),["stop"])),stripe:"",style:{width:"100%","margin-top":"10vh"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"selection"}),(0,l.Wm)(h,{label:"警员编号",prop:"policeNum",sortable:""}),(0,l.Wm)(h,{label:"姓名",prop:"policeName",sortable:""}),(0,l.Wm)(h,{label:"性别",prop:"gender",sortable:""}),(0,l.Wm)(h,{label:"民族",prop:"nation",sortable:""}),(0,l.Wm)(h,{label:"状态",prop:"status",sortable:""}),(0,l.Wm)(h,{label:"职位",prop:"position",sortable:""}),(0,l.Wm)(h,{align:"left",width:"260px"},{header:(0,l.w5)((()=>[(0,l._)("table",null,[(0,l._)("tr",null,[(0,l._)("td",null,[(0,l.Wm)(u,{type:"primary",style:{display:"inline-block",width:"130px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("当前选择"+(0,i.zw)(c.selectCaseID),1)])),_:1})]),(0,l._)("td",null,[(0,l.Wm)(y,{size:"small",type:"primary",onClick:d.goBack},{default:(0,l.w5)((()=>[(0,l.Uk)("重选案件")])),_:1},8,["onClick"])])]),(0,l._)("tr",null,[(0,l._)("td",null,[(0,l.Wm)(u,{type:"primary",style:{display:"inline-block"}},{default:(0,l.w5)((()=>[(0,l.Uk)("筛选警员编号：")])),_:1})]),(0,l._)("td",null,[(0,l.Wm)(g,{modelValue:c.policemenID,"onUpdate:modelValue":t[2]||(t[2]=e=>c.policemenID=e),size:"small",placeholder:"请输入警员编号",style:{display:"inline-block",width:"100px",height:"25px"}},null,8,["modelValue"])])])])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,l.Wm)(y,{type:"primary",onClick:d.finish,disabled:c.isSet,style:{"margin-top":"10px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("调查此案件")])),_:1},8,["onClick","disabled"])])):(0,l.kq)("",!0),"完成"===c.process?((0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)(b,{icon:"success",title:"案件已设为调查","sub-title":"点击按钮返回立案列表"},{extra:(0,l.w5)((()=>[(0,l.Wm)(y,{type:"primary",onClick:d.backToH},{default:(0,l.w5)((()=>[(0,l.Uk)("返回")])),_:1},8,["onClick"])])),_:1})])):(0,l.kq)("",!0)],64)}var c=a(7138),d={data(){return{caseID:"",process:"待调查案件",cases:[],policemen:"",policemenID:"",selectCaseID:"",team:"",isSet:!0}},methods:{handleMouseMove(e){const t=e.pageX-e.target.offsetLeft,a=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",`${t}px`),e.target.style.setProperty("--y",`${a}px`)},async setTeam(e,t){this.process="选择办案人员",await this.getPolicemen(),this.selectCaseID=t.caseID},async getCases(){try{const e=await c.Z.get(`/api/caseInvestigation/queryCase?caseID=${encodeURIComponent(this.caseID)}`);for(let t=0;t<e.data.length;t++)e.data[t].registerTime=e.data[t].registerTime.replace("T"," "),"0"==e.data[t].ranking?e.data[t].ranking="一般":"1"==e.data[t].ranking?e.data[t].ranking="较大":"2"==e.data[t].ranking?e.data[t].ranking="重大":"3"==e.data[t].ranking&&(e.data[t].ranking="特别重大");this.cases=e.data}catch(e){ElMessage({showClose:!0,message:"获取立案列表失败！",type:"error",duration:5e3})}},async getPolicemen(){try{const e=await c.Z.get(`/api/caseInvestigation/queryPolicemen?policemenID=${encodeURIComponent(this.policemenID)}`);this.policemen=e.data}catch(e){ElMessage({showClose:!0,message:"获取警员列表失败！",type:"error",duration:5e3})}},goBack(){this.process="待调查案件",this.selectCaseID=""},selectPolicemen(e){this.team=e,this.team.length>0?this.isSet=!1:this.isSet=!0},async finish(){try{await c.Z.put(`/api/caseInvestigation/modifyCaseStatus?caseID=${encodeURIComponent(this.selectCaseID)}`),this.process="完成",this.selectCaseID="",this.team="",await this.getCases()}catch(e){ElMessage({showClose:!0,message:"进行调查失败！",type:"error",duration:5e3})}},backToH(){this.process="待调查案件"}},async created(){await this.getCases()},watch:{async caseID(){await this.getCases()},async policemenID(){await this.getPolicemen()}}},m=a(89);const h=(0,m.Z)(d,[["render",p]]);var u=h}}]);
//# sourceMappingURL=316.42d55e43.js.map