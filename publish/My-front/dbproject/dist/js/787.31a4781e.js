"use strict";(self["webpackChunkdbproject"]=self["webpackChunkdbproject"]||[]).push([[787],{8787:function(e,t,l){l.r(t),l.d(t,{default:function(){return b}});var a=l(3396),d=l(9242);const n=e=>((0,a.dD)("data-v-4156ba5e"),e=e(),(0,a.Cn)(),e),o=n((()=>(0,a._)("div",null,"  出勤管理 > 出勤出勤管理",-1))),s={style:{"text-align":"center"}},i={style:{display:"inline-block","text-align":"left"}},u={class:"seaButton"},r={style:{"text-align":"center"}},p={style:{display:"inline-block","text-align":"left"}},m=n((()=>(0,a._)("td",null,null,-1))),c={class:"seaButton"},h={style:{"text-align":"center"}},y={style:{display:"inline-block","text-align":"left"}},f=n((()=>(0,a._)("td",null,null,-1))),w={class:"seaButton"};function A(e,t,l,n,A,_){const x=(0,a.up)("el-header"),I=(0,a.up)("el-text"),g=(0,a.up)("el-input"),T=(0,a.up)("el-date-picker"),b=(0,a.up)("el-option"),W=(0,a.up)("el-select"),U=(0,a.up)("el-button"),V=(0,a.up)("el-divider"),v=(0,a.up)("el-table-column"),k=(0,a.up)("el-table"),C=(0,a.up)("el-tab-pane"),D=(0,a.up)("el-tabs");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(x,{class:"sub-header",onMousemove:_.handleMouseMove},{default:(0,a.w5)((()=>[o])),_:1},8,["onMousemove"]),(0,a.Wm)(D,{modelValue:A.anv,"onUpdate:modelValue":t[11]||(t[11]=e=>A.anv=e),type:"border-card",style:{"margin-top":"10vh"}},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{label:"出勤记录",name:"1"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("table",i,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤警员编号:")])),_:1}),(0,a.Wm)(g,{class:"inputBox",modelValue:A.attendID,"onUpdate:modelValue":t[0]||(t[0]=e=>A.attendID=e),placeholder:"请输入警员编号",clearable:"",maxlength:"7",oninput:"value=value.replace(/[^\\d.]/g,'')",style:{width:"220px"},"show-word-limit":""},null,8,["modelValue"])]),(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤地区:")])),_:1}),(0,a.Wm)(g,{class:"inputBox",modelValue:A.attendAddress,"onUpdate:modelValue":t[1]||(t[1]=e=>A.attendAddress=e),style:{width:"250px"},placeholder:"请输入出勤地区",clearable:""},null,8,["modelValue"])])]),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤时间:")])),_:1}),(0,a.Wm)(T,{class:"inputBox",modelValue:A.attendTime,"onUpdate:modelValue":t[2]||(t[2]=e=>A.attendTime=e),type:"date",placeholder:"请选择出勤日期",style:{"margin-left":"10px"}},null,8,["modelValue"])]),(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("是否筛选时间:")])),_:1}),(0,a.Wm)(W,{class:"inputBox",modelValue:A.isT,"onUpdate:modelValue":t[3]||(t[3]=e=>A.isT=e),style:{width:"200px"},placeholder:"请选择"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{label:"不筛选",value:"F"}),(0,a.Wm)(b,{label:"筛选",value:"T"})])),_:1},8,["modelValue"])])])]),(0,a._)("div",u,[(0,a.Wm)(U,{type:"primary",onClick:_.fetchAttendInfo},{default:(0,a.w5)((()=>[(0,a.Uk)("查询")])),_:1},8,["onClick"])])]),(0,a.Wm)(V),(0,a._)("div",null,[(0,a.Wm)(k,{data:A.attendInfo,stripe:"",height:"450",onWheelPassive:t[4]||(t[4]=(0,d.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{prop:"id",label:"出勤警员编号",sortable:""}),(0,a.Wm)(v,{prop:"time",label:"出勤时间",sortable:""}),(0,a.Wm)(v,{prop:"area",label:"出勤地区",sortable:""})])),_:1},8,["data"])])])),_:1}),(0,a.Wm)(C,{label:"新增记录",name:"2"},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("table",p,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤警员编号:")])),_:1}),(0,a.Wm)(g,{class:"inputBox",modelValue:A.addAttendID,"onUpdate:modelValue":t[5]||(t[5]=e=>A.addAttendID=e),placeholder:"请输入警员编号",clearable:"",maxlength:"7",oninput:"value=value.replace(/[^\\d.]/g,'')",style:{width:"220px"},"show-word-limit":""},null,8,["modelValue"])]),(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤地区:")])),_:1}),(0,a.Wm)(g,{class:"inputBox",modelValue:A.addAttendAddress,"onUpdate:modelValue":t[6]||(t[6]=e=>A.addAttendAddress=e),style:{width:"250px"},placeholder:"请输入出勤地区",clearable:""},null,8,["modelValue"])])]),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤时间:")])),_:1}),(0,a.Wm)(T,{class:"inputBox",modelValue:A.addAttendTime,"onUpdate:modelValue":t[7]||(t[7]=e=>A.addAttendTime=e),type:"datetime",placeholder:"请选择出勤时间",style:{"margin-left":"10px"}},null,8,["modelValue"])]),m])]),(0,a._)("div",c,[(0,a.Wm)(U,{type:"primary",onClick:_.addAttendInfo},{default:(0,a.w5)((()=>[(0,a.Uk)("上传记录")])),_:1},8,["onClick"])])])])),_:1}),(0,a.Wm)(C,{label:"删除记录",name:"3"},{default:(0,a.w5)((()=>[(0,a._)("div",h,[(0,a._)("table",y,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤警员编号:")])),_:1}),(0,a.Wm)(g,{class:"inputBox",modelValue:A.delAttendID,"onUpdate:modelValue":t[8]||(t[8]=e=>A.delAttendID=e),placeholder:"请输入警员编号",clearable:"",maxlength:"7",oninput:"value=value.replace(/[^\\d.]/g,'')",style:{width:"220px"},"show-word-limit":""},null,8,["modelValue"])]),(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤地区:")])),_:1}),(0,a.Wm)(g,{class:"inputBox",modelValue:A.delAttendAddress,"onUpdate:modelValue":t[9]||(t[9]=e=>A.delAttendAddress=e),style:{width:"250px"},placeholder:"请输入出勤地区",clearable:""},null,8,["modelValue"])])]),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(I,{class:"noteText",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("出勤时间:")])),_:1}),(0,a.Wm)(T,{class:"inputBox",modelValue:A.delAttendTime,"onUpdate:modelValue":t[10]||(t[10]=e=>A.delAttendTime=e),type:"datetime",placeholder:"请选择出勤时间",style:{"margin-left":"10px"}},null,8,["modelValue"])]),f])]),(0,a._)("div",w,[(0,a.Wm)(U,{type:"primary",onClick:_.delAttendInfo},{default:(0,a.w5)((()=>[(0,a.Uk)("删除记录")])),_:1},8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"])],64)}var _=l(7138),x=l(7178),I={data(){return{anv:"1",attendID:"",attendAddress:"",attendTime:new Date,isT:"F",attendInfo:[],addAttendID:"",addAttendAddress:"",addAttendTime:new Date,delAttendID:"",delAttendAddress:"",delAttendTime:new Date}},methods:{handleMouseMove(e){const t=e.pageX-e.target.offsetLeft,l=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",`${t}px`),e.target.style.setProperty("--y",`${l}px`)},async fetchAttendInfo(){try{this.attendTime=new Date(this.attendTime).toISOString();const e=await _.Z.get(`/api/attendInfo?attendID=${encodeURIComponent(this.attendID)}&attendAddress=${encodeURIComponent(this.attendAddress)}&attendTime=${encodeURIComponent(this.attendTime)}&isT=${encodeURIComponent(this.isT)}`);for(let t=0;t<e.data.length;t++)e.data[t].time=e.data[t].time.replace("T"," ");this.attendInfo=e.data}catch(e){(0,x.z8)({showClose:!0,message:"获取出勤列表失败！",type:"error",duration:5e3})}},async addAttendInfo(){try{this.addAttendTime=new Date(this.addAttendTime).toISOString();const e=await _.Z.post(`/api/addAttend?attendID=${encodeURIComponent(this.addAttendID)}&attendAddress=${encodeURIComponent(this.addAttendAddress)}&attendTime=${encodeURIComponent(this.addAttendTime)}`);"string"==typeof e.data?(0,x.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(await this.fetchAttendInfo(),(0,x.z8)({showClose:!0,message:"新增记录成功! ",type:"success",duration:5e3}))}catch(e){(0,x.z8)({showClose:!0,message:"新增记录失败！",type:"error",duration:5e3})}},async delAttendInfo(){try{this.delAttendTime=new Date(this.delAttendTime).toISOString();const e=await _.Z.delete(`/api/delAttend?attendID=${encodeURIComponent(this.delAttendID)}&attendAddress=${encodeURIComponent(this.delAttendAddress)}&attendTime=${encodeURIComponent(this.delAttendTime)}`);"string"==typeof e.data?(0,x.z8)({showClose:!0,message:e.data,type:"warning",duration:5e3}):(await this.fetchAttendInfo(),(0,x.z8)({showClose:!0,message:"删除出勤成功! ",type:"success",duration:5e3}))}catch(e){(0,x.z8)({showClose:!0,message:"删除出勤失败！",type:"error",duration:5e3})}}},async created(){await this.fetchAttendInfo()}},g=l(89);const T=(0,g.Z)(I,[["render",A],["__scopeId","data-v-4156ba5e"]]);var b=T}}]);
//# sourceMappingURL=787.31a4781e.js.map